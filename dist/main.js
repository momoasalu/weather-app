/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/icons/blizzard.png":
/*!********************************!*\
  !*** ./src/icons/blizzard.png ***!
  \********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "0b2610d13cae81d00d68.png";

/***/ }),

/***/ "./src/icons/cloud.png":
/*!*****************************!*\
  !*** ./src/icons/cloud.png ***!
  \*****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "99639dceda40aacaffc4.png";

/***/ }),

/***/ "./src/icons/cloudy-day.png":
/*!**********************************!*\
  !*** ./src/icons/cloudy-day.png ***!
  \**********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "5368d4f29ddbbd82fefc.png";

/***/ }),

/***/ "./src/icons/cloudy-night.png":
/*!************************************!*\
  !*** ./src/icons/cloudy-night.png ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "f85a9b508ebb8293c657.png";

/***/ }),

/***/ "./src/icons/downpour.png":
/*!********************************!*\
  !*** ./src/icons/downpour.png ***!
  \********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "c455d74d114dffbe48c2.png";

/***/ }),

/***/ "./src/icons/drizzle-day.png":
/*!***********************************!*\
  !*** ./src/icons/drizzle-day.png ***!
  \***********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "55e9d5adb94aa3d29f26.png";

/***/ }),

/***/ "./src/icons/drizzle-night.png":
/*!*************************************!*\
  !*** ./src/icons/drizzle-night.png ***!
  \*************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "4463564966bfacbe1411.png";

/***/ }),

/***/ "./src/icons/foggy-day.png":
/*!*********************************!*\
  !*** ./src/icons/foggy-day.png ***!
  \*********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "acc07f532504d68576c1.png";

/***/ }),

/***/ "./src/icons/foggy-night.png":
/*!***********************************!*\
  !*** ./src/icons/foggy-night.png ***!
  \***********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "2de51fd3f9c4faafc34a.png";

/***/ }),

/***/ "./src/icons/full-moon.png":
/*!*********************************!*\
  !*** ./src/icons/full-moon.png ***!
  \*********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "6bdfbff96cc820a57197.png";

/***/ }),

/***/ "./src/icons/hailstone.png":
/*!*********************************!*\
  !*** ./src/icons/hailstone.png ***!
  \*********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "0f9ae87ef7aa51180def.png";

/***/ }),

/***/ "./src/icons/lightning-bolt.png":
/*!**************************************!*\
  !*** ./src/icons/lightning-bolt.png ***!
  \**************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "22b84a4c5c9f9e2d2a99.png";

/***/ }),

/***/ "./src/icons/moon phases /first-quarter.png":
/*!**************************************************!*\
  !*** ./src/icons/moon phases /first-quarter.png ***!
  \**************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "498e32b34e2edd0f4deb.png";

/***/ }),

/***/ "./src/icons/moon phases /full-moon.png":
/*!**********************************************!*\
  !*** ./src/icons/moon phases /full-moon.png ***!
  \**********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "d9d056b9c82b9a33c5ce.png";

/***/ }),

/***/ "./src/icons/moon phases /last-quarter.png":
/*!*************************************************!*\
  !*** ./src/icons/moon phases /last-quarter.png ***!
  \*************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "adf39eaf403d3c42d567.png";

/***/ }),

/***/ "./src/icons/moon phases /new-moon.png":
/*!*********************************************!*\
  !*** ./src/icons/moon phases /new-moon.png ***!
  \*********************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "ffb3ece51141a239ce30.png";

/***/ }),

/***/ "./src/icons/moon phases /waning-crescent.png":
/*!****************************************************!*\
  !*** ./src/icons/moon phases /waning-crescent.png ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "ced8066b4343e084e713.png";

/***/ }),

/***/ "./src/icons/moon phases /waning-gibbous.png":
/*!***************************************************!*\
  !*** ./src/icons/moon phases /waning-gibbous.png ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "b5a26ddfeb389b7b7a37.png";

/***/ }),

/***/ "./src/icons/moon phases /waxing-crescent.png":
/*!****************************************************!*\
  !*** ./src/icons/moon phases /waxing-crescent.png ***!
  \****************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "dc16b209cdd865d49ecc.png";

/***/ }),

/***/ "./src/icons/moon phases /waxing-gibbous.png":
/*!***************************************************!*\
  !*** ./src/icons/moon phases /waxing-gibbous.png ***!
  \***************************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "2c9bc4d130ebe20c4e63.png";

/***/ }),

/***/ "./src/icons/rain.png":
/*!****************************!*\
  !*** ./src/icons/rain.png ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "a8fde1c5bd6c19919171.png";

/***/ }),

/***/ "./src/icons/snow.png":
/*!****************************!*\
  !*** ./src/icons/snow.png ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "5005994670bf870f327c.png";

/***/ }),

/***/ "./src/icons/storm.png":
/*!*****************************!*\
  !*** ./src/icons/storm.png ***!
  \*****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "2284774f0e17bde2c3f9.png";

/***/ }),

/***/ "./src/icons/sun.png":
/*!***************************!*\
  !*** ./src/icons/sun.png ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "1d91796c35a91419dd21.png";

/***/ }),

/***/ "./src/icons/sunrise.png":
/*!*******************************!*\
  !*** ./src/icons/sunrise.png ***!
  \*******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "510efcd7ead0bc55d849.png";

/***/ }),

/***/ "./src/icons/sunset.png":
/*!******************************!*\
  !*** ./src/icons/sunset.png ***!
  \******************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "b2ae8c73dbc1233f1e30.png";

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		var scriptUrl;
/******/ 		if (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + "";
/******/ 		var document = __webpack_require__.g.document;
/******/ 		if (!scriptUrl && document) {
/******/ 			if (document.currentScript)
/******/ 				scriptUrl = document.currentScript.src;
/******/ 			if (!scriptUrl) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				if(scripts.length) {
/******/ 					var i = scripts.length - 1;
/******/ 					while (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 		// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration
/******/ 		// or pass an empty string ("") and set the __webpack_public_path__ variable from your code to use your own logic.
/******/ 		if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");
/******/ 		scriptUrl = scriptUrl.replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/");
/******/ 		__webpack_require__.p = scriptUrl;
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _icons_sun_png__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/sun.png */ "./src/icons/sun.png");
/* harmony import */ var _icons_full_moon_png__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icons/full-moon.png */ "./src/icons/full-moon.png");
/* harmony import */ var _icons_cloudy_day_png__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icons/cloudy-day.png */ "./src/icons/cloudy-day.png");
/* harmony import */ var _icons_cloudy_night_png__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icons/cloudy-night.png */ "./src/icons/cloudy-night.png");
/* harmony import */ var _icons_cloud_png__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./icons/cloud.png */ "./src/icons/cloud.png");
/* harmony import */ var _icons_foggy_day_png__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./icons/foggy-day.png */ "./src/icons/foggy-day.png");
/* harmony import */ var _icons_foggy_night_png__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./icons/foggy-night.png */ "./src/icons/foggy-night.png");
/* harmony import */ var _icons_drizzle_day_png__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./icons/drizzle-day.png */ "./src/icons/drizzle-day.png");
/* harmony import */ var _icons_drizzle_night_png__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./icons/drizzle-night.png */ "./src/icons/drizzle-night.png");
/* harmony import */ var _icons_snow_png__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./icons/snow.png */ "./src/icons/snow.png");
/* harmony import */ var _icons_downpour_png__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./icons/downpour.png */ "./src/icons/downpour.png");
/* harmony import */ var _icons_lightning_bolt_png__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./icons/lightning-bolt.png */ "./src/icons/lightning-bolt.png");
/* harmony import */ var _icons_rain_png__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./icons/rain.png */ "./src/icons/rain.png");
/* harmony import */ var _icons_storm_png__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./icons/storm.png */ "./src/icons/storm.png");
/* harmony import */ var _icons_blizzard_png__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./icons/blizzard.png */ "./src/icons/blizzard.png");
/* harmony import */ var _icons_hailstone_png__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./icons/hailstone.png */ "./src/icons/hailstone.png");
/* harmony import */ var _icons_moon_phases_first_quarter_png__WEBPACK_IMPORTED_MODULE_16__ = __webpack_require__(/*! ./icons/moon phases /first-quarter.png */ "./src/icons/moon phases /first-quarter.png");
/* harmony import */ var _icons_moon_phases_full_moon_png__WEBPACK_IMPORTED_MODULE_17__ = __webpack_require__(/*! ./icons/moon phases /full-moon.png */ "./src/icons/moon phases /full-moon.png");
/* harmony import */ var _icons_moon_phases_last_quarter_png__WEBPACK_IMPORTED_MODULE_18__ = __webpack_require__(/*! ./icons/moon phases /last-quarter.png */ "./src/icons/moon phases /last-quarter.png");
/* harmony import */ var _icons_moon_phases_new_moon_png__WEBPACK_IMPORTED_MODULE_19__ = __webpack_require__(/*! ./icons/moon phases /new-moon.png */ "./src/icons/moon phases /new-moon.png");
/* harmony import */ var _icons_moon_phases_waning_crescent_png__WEBPACK_IMPORTED_MODULE_20__ = __webpack_require__(/*! ./icons/moon phases /waning-crescent.png */ "./src/icons/moon phases /waning-crescent.png");
/* harmony import */ var _icons_moon_phases_waning_gibbous_png__WEBPACK_IMPORTED_MODULE_21__ = __webpack_require__(/*! ./icons/moon phases /waning-gibbous.png */ "./src/icons/moon phases /waning-gibbous.png");
/* harmony import */ var _icons_moon_phases_waxing_gibbous_png__WEBPACK_IMPORTED_MODULE_22__ = __webpack_require__(/*! ./icons/moon phases /waxing-gibbous.png */ "./src/icons/moon phases /waxing-gibbous.png");
/* harmony import */ var _icons_moon_phases_waxing_crescent_png__WEBPACK_IMPORTED_MODULE_23__ = __webpack_require__(/*! ./icons/moon phases /waxing-crescent.png */ "./src/icons/moon phases /waxing-crescent.png");
/* harmony import */ var _icons_sunrise_png__WEBPACK_IMPORTED_MODULE_24__ = __webpack_require__(/*! ./icons/sunrise.png */ "./src/icons/sunrise.png");
/* harmony import */ var _icons_sunset_png__WEBPACK_IMPORTED_MODULE_25__ = __webpack_require__(/*! ./icons/sunset.png */ "./src/icons/sunset.png");





























function getIcon(code, isDay) {
  let src;
  switch (code) {
    case 1000:
      src = isDay ? _icons_sun_png__WEBPACK_IMPORTED_MODULE_0__ : _icons_full_moon_png__WEBPACK_IMPORTED_MODULE_1__;
      break;
    case 1003:
    case 1006:
      src = isDay ? _icons_cloudy_day_png__WEBPACK_IMPORTED_MODULE_2__ : _icons_cloudy_night_png__WEBPACK_IMPORTED_MODULE_3__;
      break;
    case 1009:
      src = _icons_cloud_png__WEBPACK_IMPORTED_MODULE_4__;
      break;
    case 1030:
    case 1135:
    case 1147:
      src = isDay ? _icons_foggy_day_png__WEBPACK_IMPORTED_MODULE_5__ : _icons_foggy_night_png__WEBPACK_IMPORTED_MODULE_6__;
      break;
    case 1063:
    case 1066:
    case 1069:
    case 1072:
    case 1150:
    case 1153:
    case 1168:
    case 1171:
      src = isDay ? _icons_drizzle_day_png__WEBPACK_IMPORTED_MODULE_7__ : _icons_drizzle_night_png__WEBPACK_IMPORTED_MODULE_8__;
      break;
    case 1087:
      src = _icons_lightning_bolt_png__WEBPACK_IMPORTED_MODULE_11__;
      break;
    case 1114:
    case 1210:
    case 1213:
    case 1216:
    case 1219:
    case 1222:
    case 1225:
    case 1255:
    case 1258:
      src = _icons_snow_png__WEBPACK_IMPORTED_MODULE_9__;
      break;
    case 1117:
      src = _icons_blizzard_png__WEBPACK_IMPORTED_MODULE_14__;
      break;
    case 1180:
    case 1183:
    case 1186:
    case 1189:
    case 1192:
    case 1240:
    case 1243:
    case 1246:
      src = _icons_rain_png__WEBPACK_IMPORTED_MODULE_12__;
      break;
    case 1195:
    case 1198:
    case 1201:
    case 1204:
    case 1207:
    case 1249:
    case 1252:
      src = _icons_downpour_png__WEBPACK_IMPORTED_MODULE_10__;
      break;
    case 1237:
    case 1261:
    case 1264:
      src = _icons_hailstone_png__WEBPACK_IMPORTED_MODULE_15__;
      break;
    case 1273:
    case 1276:
    case 1279:
    case 1282:
      src = _icons_storm_png__WEBPACK_IMPORTED_MODULE_13__;
      break;
    default:
      src = "weird! no option here?";
      break;
  }
  return src;
}

function getMoonPhase (phase) {
  let src;
  switch (phase) {
    case 'First Quarter':
      src = _icons_moon_phases_first_quarter_png__WEBPACK_IMPORTED_MODULE_16__;
      break;
    case 'Full Moon':
      src = _icons_moon_phases_full_moon_png__WEBPACK_IMPORTED_MODULE_17__;
      break;
    case 'Last Quarter':
      src = _icons_moon_phases_last_quarter_png__WEBPACK_IMPORTED_MODULE_18__;
      break;
    case 'New Moon':
      src = _icons_moon_phases_new_moon_png__WEBPACK_IMPORTED_MODULE_19__;
      break;
    case 'Waning Crescent':
      src = _icons_moon_phases_waning_crescent_png__WEBPACK_IMPORTED_MODULE_20__;
      break;
    case 'Waxing Crescent':
      src = _icons_moon_phases_waxing_crescent_png__WEBPACK_IMPORTED_MODULE_23__;
      break;
    case 'Waning Gibbous':
      src = _icons_moon_phases_waning_gibbous_png__WEBPACK_IMPORTED_MODULE_21__;
      break;
    case 'Waxing Gibbous':
      src = _icons_moon_phases_waxing_gibbous_png__WEBPACK_IMPORTED_MODULE_22__;
      break;
    default:
      src = 'nope! not here';
      break;
  }
  return src;
}

function startLoad() {
  console.log("loading...");
}

function stopLoad() {
  console.log("done!");
}

let slideIndex = 0;

function showSlides(index) {
  const slides = [...document.querySelectorAll(".slide")];
  slides.forEach((slide) => {
    slide.style.setProperty("display", "none");
  });
  slides[index].style.setProperty("display", "block");
}

showSlides(0);

function plusSlides() {
  slideIndex += 1;
  if (slideIndex >= [...document.querySelectorAll(".slide")].length) {
    slideIndex = 0;
  }
  showSlides(slideIndex);
}

function minusSlides() {
  slideIndex -= 1;
  if (slideIndex < 0) {
    slideIndex = [...document.querySelectorAll(".slide")].length - 1;
  }
  showSlides(slideIndex);
}

const prevBtn = document.querySelector("button.prev");
const nextBtn = document.querySelector("button.next");

prevBtn.addEventListener("click", minusSlides);
nextBtn.addEventListener("click", plusSlides);

function extractData(forecast) {
  return {
    location: `${forecast.location.name}, ${forecast.location.country}`,
    time: forecast.current.last_updated,
    isDay: forecast.current.is_day,
    temp: forecast.current.temp_c,
    condition_code: forecast.current.condition.code,
    condition_text: forecast.current.condition.text,
    feels_like: forecast.current.feelslike_c,
    humidity: forecast.current.humidity,
    uv_index: forecast.current.uv,
    wind_kph: forecast.current.wind_kph,
    wind_dir: forecast.current.wind_dir,
    wind_deg: forecast.current.wind_degree,
    precip: forecast.current.precip_mm,
    cloud: forecast.current.cloud,
    forecastday: forecast.forecast.forecastday.map((item) => ({
      sunrise: item.astro.sunrise,
      sunset: item.astro.sunset,
      moon_phase: item.astro.moon_phase,
      date: item.date,
      hour: [
        {
          time: "00:00",
          temp: item.hour[0].temp_c,
          condition_code: item.hour[0].condition.code,
          condition_text: item.hour[0].condition.text,
          isDay: item.hour[0].is_day,
        },
        {
          time: "06:00",
          temp: item.hour[6].temp_c,
          condition_code: item.hour[6].condition.code,
          condition_text: item.hour[6].condition.text,
          isDay: item.hour[6].is_day,
        },
        {
          time: "12:00",
          temp: item.hour[12].temp_c,
          condition_code: item.hour[12].condition.code,
          condition_text: item.hour[12].condition.text,
          isDay: item.hour[12].is_day,
        },
        {
          time: "18:00",
          temp: item.hour[18].temp_c,
          condition_code: item.hour[18].condition.code,
          condition_text: item.hour[18].condition.text,
          isDay: item.hour[18].is_day,
        },
      ],
    })),
  };
}

function populatePage(promise) {
  promise.then((data) => {
    const current = document.querySelector(".current");
    const city = current.querySelector(".city");
    city.textContent = data.location;
    const time = current.querySelector(".current-time");
    time.textContent = data.time;
    const weatherIcon = current.querySelector(".current-weather > .icon");
    weatherIcon.src = getIcon(data.condition_code, data.isDay);
    const weatherCondition = current.querySelector(
      ".current-weather > .condition",
    );
    weatherCondition.textContent = data.condition_text;
    const temp = current.querySelector(".current-weather > .temp");
    temp.textContent = `${data.temp}ºC`;

    const feelsLike = document.querySelector(".feels-like");
    feelsLike.textContent = `${data.feels_like}ºC`;
    const humidity = document.querySelector(".humidity");
    humidity.textContent = `${data.humidity}%`;
    const uvIndex = document.querySelector(".uv-index");
    uvIndex.textContent = data.uv_index;
    const wind = document.querySelector(".wind");
    wind.textContent = `${data.wind_kph} ${data.wind_dir}`;
    const precip = document.querySelector(".precip");
    precip.textContent = `${data.precip}mm`;
    const cloud = document.querySelector(".cloud");
    cloud.textContent = `${data.cloud}%`;

    let i = 0;
    const slides = [...document.querySelectorAll(".slide")];
    slides.forEach((slide) => {
      const sunriseText = slide.querySelector(".sunrise > p");
      sunriseText.textContent = data.forecastday[i].sunrise;
      const sunriseIcon = slide.querySelector('.sunrise > img');
      sunriseIcon.src = _icons_sunrise_png__WEBPACK_IMPORTED_MODULE_24__;
      const sunsetText = slide.querySelector(".sunset > p");
      sunsetText.textContent = data.forecastday[i].sunset;
      const sunsetIcon = slide.querySelector('.sunset > img');
      sunsetIcon.src = _icons_sunset_png__WEBPACK_IMPORTED_MODULE_25__;
      const moonPhaseText = slide.querySelector(".moon-phase > p");
      moonPhaseText.textContent = data.forecastday[i].moon_phase;
      const moonPhaseIcon = slide.querySelector('.moon-phase > img');
      moonPhaseIcon.src = getMoonPhase(data.forecastday[i].moon_phase);

      let j = 0;
      [...slide.querySelectorAll(".hour")].forEach((hour) => {
        const icon = hour.querySelector(".icon");
        icon.src = getIcon(
          data.forecastday[i].hour[j].condition_code,
          data.forecastday[i].hour[j].isDay,
        );
        const condition = hour.querySelector(".condition");
        condition.textContent = data.forecastday[i].hour[j].condition_text;
        const temperature = hour.querySelector(".temp");
        temperature.textContent = `${data.forecastday[i].hour[j].temp}ºC`;
        j += 1;
      });
      i += 1;
    });
    slideIndex = 0;
    showSlides(slideIndex);
  });
}

async function getForecastData(location) {
  startLoad();
  const forecastRequest = await fetch(
    `https://api.weatherapi.com/v1/forecast.json?key=ff4638f583ef4aa698c114919231109&q=${location}&days=3`,
    { mode: "cors" },
  );
  const forecast = await forecastRequest.json();
  console.log(forecast);
  const data = extractData(forecast);
  console.log(data);
  stopLoad();
  return data;
}

populatePage(getForecastData("Paris"));

async function searchCities(str) {
  if (str.trim().length > 0) {
    const optionsRequest = await fetch(
      `https://api.weatherapi.com/v1/search.json?key=ff4638f583ef4aa698c114919231109&q=${str}`,
      { mode: "cors" },
    );
    if (optionsRequest.ok) {
      const options = await optionsRequest.json();
      return options;
    }
  }
  return [];
}

const search = document.querySelector("input");
const searchBtn = document.querySelector("button");

const form = document.querySelector("form");

form.addEventListener("submit", (ev) => {
  ev.preventDefault();
});

search.addEventListener("search", (ev) => {
  ev.preventDefault();
});

function searchStr(e) {
  const index = e.target.getAttribute("data-index");
  searchCities(search.value).then((cities) => {
    populatePage(getForecastData(`${cities[index].lat},${cities[index].lon}`));
    form.reset();
  });
}

searchBtn.addEventListener("click", () => {
  searchCities(search.value).then((cities) => {
    if (cities.length > 0) {
      const choice = cities[0];
      populatePage(getForecastData(`${choice.lat},${choice.lon}`));
      console.log(choice);
    } else {
      console.log("no options!");
    }
  });
  form.reset();
});

search.addEventListener("input", () => {
  const searchBox = document.querySelector("div.search-box");
  searchBox.textContent = "";
  searchCities(search.value).then((cities) => {
    let index = 0;
    cities.forEach((item) => {
      const city = document.createElement("div");
      city.classList.add("city-option");
      city.setAttribute("data-index", index);
      city.addEventListener("click", searchStr);
      city.textContent = item.region
        ? `${item.name}, ${item.region}, ${item.country}`
        : `${item.name}, ${item.country}`;
      searchBox.appendChild(city);
      index += 1;
    });
  });
});

search.addEventListener("focus", () => {
  const searchBox = document.createElement("div");
  searchBox.classList.add("search-box");
  search.parentElement.appendChild(searchBox);
});

search.addEventListener("focusout", () => {
  const searchBox = document.querySelector("div.search-box");
  setTimeout(() => {
    searchBox.remove();
  }, 300);
});

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBOztBQUVBO0FBQ0E7QUFDQTtBQUNBLHlGQUF5RixJQUFJO0FBQzdGLFFBQVEsY0FBYztBQUN0QjtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBOztBQUVBO0FBQ0E7O0FBRUE7O0FBRUE7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0Esb0NBQW9DLGtCQUFrQixHQUFHLGtCQUFrQjtBQUMzRTtBQUNBLEdBQUc7QUFDSDs7QUFFQTtBQUNBO0FBQ0E7QUFDQTtBQUNBLHNDQUFzQyxXQUFXLEdBQUcsV0FBVztBQUMvRDtBQUNBLE1BQU07QUFDTjtBQUNBO0FBQ0EsR0FBRztBQUNIO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsYUFBYSxVQUFVLElBQUksWUFBWSxJQUFJLGFBQWE7QUFDeEQsYUFBYSxVQUFVLElBQUksYUFBYTtBQUN4QztBQUNBO0FBQ0EsS0FBSztBQUNMLEdBQUc7QUFDSCxDQUFDOztBQUVEO0FBQ0E7QUFDQTtBQUNBO0FBQ0EsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLEdBQUc7QUFDSCxDQUFDIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvd2VicGFjay9ydW50aW1lL2dsb2JhbCIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC93ZWJwYWNrL3J1bnRpbWUvbWFrZSBuYW1lc3BhY2Ugb2JqZWN0Iiwid2VicGFjazovL3dlYXRoZXItYXBwL3dlYnBhY2svcnVudGltZS9wdWJsaWNQYXRoIiwid2VicGFjazovL3dlYXRoZXItYXBwLy4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSBtb2R1bGUgY2FjaGVcbnZhciBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX18gPSB7fTtcblxuLy8gVGhlIHJlcXVpcmUgZnVuY3Rpb25cbmZ1bmN0aW9uIF9fd2VicGFja19yZXF1aXJlX18obW9kdWxlSWQpIHtcblx0Ly8gQ2hlY2sgaWYgbW9kdWxlIGlzIGluIGNhY2hlXG5cdHZhciBjYWNoZWRNb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdO1xuXHRpZiAoY2FjaGVkTW9kdWxlICE9PSB1bmRlZmluZWQpIHtcblx0XHRyZXR1cm4gY2FjaGVkTW9kdWxlLmV4cG9ydHM7XG5cdH1cblx0Ly8gQ3JlYXRlIGEgbmV3IG1vZHVsZSAoYW5kIHB1dCBpdCBpbnRvIHRoZSBjYWNoZSlcblx0dmFyIG1vZHVsZSA9IF9fd2VicGFja19tb2R1bGVfY2FjaGVfX1ttb2R1bGVJZF0gPSB7XG5cdFx0Ly8gbm8gbW9kdWxlLmlkIG5lZWRlZFxuXHRcdC8vIG5vIG1vZHVsZS5sb2FkZWQgbmVlZGVkXG5cdFx0ZXhwb3J0czoge31cblx0fTtcblxuXHQvLyBFeGVjdXRlIHRoZSBtb2R1bGUgZnVuY3Rpb25cblx0X193ZWJwYWNrX21vZHVsZXNfX1ttb2R1bGVJZF0obW9kdWxlLCBtb2R1bGUuZXhwb3J0cywgX193ZWJwYWNrX3JlcXVpcmVfXyk7XG5cblx0Ly8gUmV0dXJuIHRoZSBleHBvcnRzIG9mIHRoZSBtb2R1bGVcblx0cmV0dXJuIG1vZHVsZS5leHBvcnRzO1xufVxuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLmcgPSAoZnVuY3Rpb24oKSB7XG5cdGlmICh0eXBlb2YgZ2xvYmFsVGhpcyA9PT0gJ29iamVjdCcpIHJldHVybiBnbG9iYWxUaGlzO1xuXHR0cnkge1xuXHRcdHJldHVybiB0aGlzIHx8IG5ldyBGdW5jdGlvbigncmV0dXJuIHRoaXMnKSgpO1xuXHR9IGNhdGNoIChlKSB7XG5cdFx0aWYgKHR5cGVvZiB3aW5kb3cgPT09ICdvYmplY3QnKSByZXR1cm4gd2luZG93O1xuXHR9XG59KSgpOyIsIi8vIGRlZmluZSBfX2VzTW9kdWxlIG9uIGV4cG9ydHNcbl9fd2VicGFja19yZXF1aXJlX18uciA9IChleHBvcnRzKSA9PiB7XG5cdGlmKHR5cGVvZiBTeW1ib2wgIT09ICd1bmRlZmluZWQnICYmIFN5bWJvbC50b1N0cmluZ1RhZykge1xuXHRcdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCBTeW1ib2wudG9TdHJpbmdUYWcsIHsgdmFsdWU6ICdNb2R1bGUnIH0pO1xuXHR9XG5cdE9iamVjdC5kZWZpbmVQcm9wZXJ0eShleHBvcnRzLCAnX19lc01vZHVsZScsIHsgdmFsdWU6IHRydWUgfSk7XG59OyIsInZhciBzY3JpcHRVcmw7XG5pZiAoX193ZWJwYWNrX3JlcXVpcmVfXy5nLmltcG9ydFNjcmlwdHMpIHNjcmlwdFVybCA9IF9fd2VicGFja19yZXF1aXJlX18uZy5sb2NhdGlvbiArIFwiXCI7XG52YXIgZG9jdW1lbnQgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcuZG9jdW1lbnQ7XG5pZiAoIXNjcmlwdFVybCAmJiBkb2N1bWVudCkge1xuXHRpZiAoZG9jdW1lbnQuY3VycmVudFNjcmlwdClcblx0XHRzY3JpcHRVcmwgPSBkb2N1bWVudC5jdXJyZW50U2NyaXB0LnNyYztcblx0aWYgKCFzY3JpcHRVcmwpIHtcblx0XHR2YXIgc2NyaXB0cyA9IGRvY3VtZW50LmdldEVsZW1lbnRzQnlUYWdOYW1lKFwic2NyaXB0XCIpO1xuXHRcdGlmKHNjcmlwdHMubGVuZ3RoKSB7XG5cdFx0XHR2YXIgaSA9IHNjcmlwdHMubGVuZ3RoIC0gMTtcblx0XHRcdHdoaWxlIChpID4gLTEgJiYgIXNjcmlwdFVybCkgc2NyaXB0VXJsID0gc2NyaXB0c1tpLS1dLnNyYztcblx0XHR9XG5cdH1cbn1cbi8vIFdoZW4gc3VwcG9ydGluZyBicm93c2VycyB3aGVyZSBhbiBhdXRvbWF0aWMgcHVibGljUGF0aCBpcyBub3Qgc3VwcG9ydGVkIHlvdSBtdXN0IHNwZWNpZnkgYW4gb3V0cHV0LnB1YmxpY1BhdGggbWFudWFsbHkgdmlhIGNvbmZpZ3VyYXRpb25cbi8vIG9yIHBhc3MgYW4gZW1wdHkgc3RyaW5nIChcIlwiKSBhbmQgc2V0IHRoZSBfX3dlYnBhY2tfcHVibGljX3BhdGhfXyB2YXJpYWJsZSBmcm9tIHlvdXIgY29kZSB0byB1c2UgeW91ciBvd24gbG9naWMuXG5pZiAoIXNjcmlwdFVybCkgdGhyb3cgbmV3IEVycm9yKFwiQXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCBpbiB0aGlzIGJyb3dzZXJcIik7XG5zY3JpcHRVcmwgPSBzY3JpcHRVcmwucmVwbGFjZSgvIy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcPy4qJC8sIFwiXCIpLnJlcGxhY2UoL1xcL1teXFwvXSskLywgXCIvXCIpO1xuX193ZWJwYWNrX3JlcXVpcmVfXy5wID0gc2NyaXB0VXJsOyIsImltcG9ydCBTdW5ueSBmcm9tIFwiLi9pY29ucy9zdW4ucG5nXCI7XG5pbXBvcnQgQ2xlYXIgZnJvbSBcIi4vaWNvbnMvZnVsbC1tb29uLnBuZ1wiO1xuaW1wb3J0IENsb3VkeURheSBmcm9tIFwiLi9pY29ucy9jbG91ZHktZGF5LnBuZ1wiO1xuaW1wb3J0IENsb3VkeU5pZ2h0IGZyb20gXCIuL2ljb25zL2Nsb3VkeS1uaWdodC5wbmdcIjtcbmltcG9ydCBPdmVyY2FzdCBmcm9tIFwiLi9pY29ucy9jbG91ZC5wbmdcIjtcbmltcG9ydCBNaXN0eURheSBmcm9tIFwiLi9pY29ucy9mb2dneS1kYXkucG5nXCI7XG5pbXBvcnQgTWlzdHlOaWdodCBmcm9tIFwiLi9pY29ucy9mb2dneS1uaWdodC5wbmdcIjtcbmltcG9ydCBEcml6emxlRGF5IGZyb20gXCIuL2ljb25zL2RyaXp6bGUtZGF5LnBuZ1wiO1xuaW1wb3J0IERyaXp6bGVOaWdodCBmcm9tIFwiLi9pY29ucy9kcml6emxlLW5pZ2h0LnBuZ1wiO1xuaW1wb3J0IFNub3cgZnJvbSBcIi4vaWNvbnMvc25vdy5wbmdcIjtcbmltcG9ydCBTbGVldCBmcm9tIFwiLi9pY29ucy9kb3ducG91ci5wbmdcIjtcbmltcG9ydCBUaHVuZGVyIGZyb20gXCIuL2ljb25zL2xpZ2h0bmluZy1ib2x0LnBuZ1wiO1xuaW1wb3J0IFJhaW4gZnJvbSBcIi4vaWNvbnMvcmFpbi5wbmdcIjtcbmltcG9ydCBTdG9ybSBmcm9tIFwiLi9pY29ucy9zdG9ybS5wbmdcIjtcbmltcG9ydCBCbGl6emFyZCBmcm9tIFwiLi9pY29ucy9ibGl6emFyZC5wbmdcIjtcbmltcG9ydCBIYWlsc3RvbmUgZnJvbSBcIi4vaWNvbnMvaGFpbHN0b25lLnBuZ1wiO1xuXG5pbXBvcnQgRmlyc3RRdWFydGVyIGZyb20gXCIuL2ljb25zL21vb24gcGhhc2VzIC9maXJzdC1xdWFydGVyLnBuZ1wiO1xuaW1wb3J0IEZ1bGxNb29uIGZyb20gXCIuL2ljb25zL21vb24gcGhhc2VzIC9mdWxsLW1vb24ucG5nXCI7XG5pbXBvcnQgTGFzdFF1YXJ0ZXIgZnJvbSBcIi4vaWNvbnMvbW9vbiBwaGFzZXMgL2xhc3QtcXVhcnRlci5wbmdcIjtcbmltcG9ydCBOZXdNb29uIGZyb20gXCIuL2ljb25zL21vb24gcGhhc2VzIC9uZXctbW9vbi5wbmdcIjtcbmltcG9ydCBXYW5pbmdDcmVzY2VudCBmcm9tIFwiLi9pY29ucy9tb29uIHBoYXNlcyAvd2FuaW5nLWNyZXNjZW50LnBuZ1wiO1xuaW1wb3J0IFdhbmluZ0dpYmJvdXMgZnJvbSBcIi4vaWNvbnMvbW9vbiBwaGFzZXMgL3dhbmluZy1naWJib3VzLnBuZ1wiO1xuaW1wb3J0IFdheGluZ0dpYmJvdXMgZnJvbSBcIi4vaWNvbnMvbW9vbiBwaGFzZXMgL3dheGluZy1naWJib3VzLnBuZ1wiO1xuaW1wb3J0IFdheGluZ0NyZXNjZW50IGZyb20gXCIuL2ljb25zL21vb24gcGhhc2VzIC93YXhpbmctY3Jlc2NlbnQucG5nXCI7XG5cbmltcG9ydCBTdW5yaXNlIGZyb20gJy4vaWNvbnMvc3VucmlzZS5wbmcnO1xuaW1wb3J0IFN1bnNldCBmcm9tICcuL2ljb25zL3N1bnNldC5wbmcnO1xuXG5mdW5jdGlvbiBnZXRJY29uKGNvZGUsIGlzRGF5KSB7XG4gIGxldCBzcmM7XG4gIHN3aXRjaCAoY29kZSkge1xuICAgIGNhc2UgMTAwMDpcbiAgICAgIHNyYyA9IGlzRGF5ID8gU3VubnkgOiBDbGVhcjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTAwMzpcbiAgICBjYXNlIDEwMDY6XG4gICAgICBzcmMgPSBpc0RheSA/IENsb3VkeURheSA6IENsb3VkeU5pZ2h0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMDA5OlxuICAgICAgc3JjID0gT3ZlcmNhc3Q7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEwMzA6XG4gICAgY2FzZSAxMTM1OlxuICAgIGNhc2UgMTE0NzpcbiAgICAgIHNyYyA9IGlzRGF5ID8gTWlzdHlEYXkgOiBNaXN0eU5pZ2h0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMDYzOlxuICAgIGNhc2UgMTA2NjpcbiAgICBjYXNlIDEwNjk6XG4gICAgY2FzZSAxMDcyOlxuICAgIGNhc2UgMTE1MDpcbiAgICBjYXNlIDExNTM6XG4gICAgY2FzZSAxMTY4OlxuICAgIGNhc2UgMTE3MTpcbiAgICAgIHNyYyA9IGlzRGF5ID8gRHJpenpsZURheSA6IERyaXp6bGVOaWdodDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTA4NzpcbiAgICAgIHNyYyA9IFRodW5kZXI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExMTQ6XG4gICAgY2FzZSAxMjEwOlxuICAgIGNhc2UgMTIxMzpcbiAgICBjYXNlIDEyMTY6XG4gICAgY2FzZSAxMjE5OlxuICAgIGNhc2UgMTIyMjpcbiAgICBjYXNlIDEyMjU6XG4gICAgY2FzZSAxMjU1OlxuICAgIGNhc2UgMTI1ODpcbiAgICAgIHNyYyA9IFNub3c7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExMTc6XG4gICAgICBzcmMgPSBCbGl6emFyZDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTE4MDpcbiAgICBjYXNlIDExODM6XG4gICAgY2FzZSAxMTg2OlxuICAgIGNhc2UgMTE4OTpcbiAgICBjYXNlIDExOTI6XG4gICAgY2FzZSAxMjQwOlxuICAgIGNhc2UgMTI0MzpcbiAgICBjYXNlIDEyNDY6XG4gICAgICBzcmMgPSBSYWluO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTk1OlxuICAgIGNhc2UgMTE5ODpcbiAgICBjYXNlIDEyMDE6XG4gICAgY2FzZSAxMjA0OlxuICAgIGNhc2UgMTIwNzpcbiAgICBjYXNlIDEyNDk6XG4gICAgY2FzZSAxMjUyOlxuICAgICAgc3JjID0gU2xlZXQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEyMzc6XG4gICAgY2FzZSAxMjYxOlxuICAgIGNhc2UgMTI2NDpcbiAgICAgIHNyYyA9IEhhaWxzdG9uZTtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTI3MzpcbiAgICBjYXNlIDEyNzY6XG4gICAgY2FzZSAxMjc5OlxuICAgIGNhc2UgMTI4MjpcbiAgICAgIHNyYyA9IFN0b3JtO1xuICAgICAgYnJlYWs7XG4gICAgZGVmYXVsdDpcbiAgICAgIHNyYyA9IFwid2VpcmQhIG5vIG9wdGlvbiBoZXJlP1wiO1xuICAgICAgYnJlYWs7XG4gIH1cbiAgcmV0dXJuIHNyYztcbn1cblxuZnVuY3Rpb24gZ2V0TW9vblBoYXNlIChwaGFzZSkge1xuICBsZXQgc3JjO1xuICBzd2l0Y2ggKHBoYXNlKSB7XG4gICAgY2FzZSAnRmlyc3QgUXVhcnRlcic6XG4gICAgICBzcmMgPSBGaXJzdFF1YXJ0ZXI7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdGdWxsIE1vb24nOlxuICAgICAgc3JjID0gRnVsbE1vb247XG4gICAgICBicmVhaztcbiAgICBjYXNlICdMYXN0IFF1YXJ0ZXInOlxuICAgICAgc3JjID0gTGFzdFF1YXJ0ZXI7XG4gICAgICBicmVhaztcbiAgICBjYXNlICdOZXcgTW9vbic6XG4gICAgICBzcmMgPSBOZXdNb29uO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnV2FuaW5nIENyZXNjZW50JzpcbiAgICAgIHNyYyA9IFdhbmluZ0NyZXNjZW50O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnV2F4aW5nIENyZXNjZW50JzpcbiAgICAgIHNyYyA9IFdheGluZ0NyZXNjZW50O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAnV2FuaW5nIEdpYmJvdXMnOlxuICAgICAgc3JjID0gV2FuaW5nR2liYm91cztcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgJ1dheGluZyBHaWJib3VzJzpcbiAgICAgIHNyYyA9IFdheGluZ0dpYmJvdXM7XG4gICAgICBicmVhaztcbiAgICBkZWZhdWx0OlxuICAgICAgc3JjID0gJ25vcGUhIG5vdCBoZXJlJztcbiAgICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiBzcmM7XG59XG5cbmZ1bmN0aW9uIHN0YXJ0TG9hZCgpIHtcbiAgY29uc29sZS5sb2coXCJsb2FkaW5nLi4uXCIpO1xufVxuXG5mdW5jdGlvbiBzdG9wTG9hZCgpIHtcbiAgY29uc29sZS5sb2coXCJkb25lIVwiKTtcbn1cblxubGV0IHNsaWRlSW5kZXggPSAwO1xuXG5mdW5jdGlvbiBzaG93U2xpZGVzKGluZGV4KSB7XG4gIGNvbnN0IHNsaWRlcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlXCIpXTtcbiAgc2xpZGVzLmZvckVhY2goKHNsaWRlKSA9PiB7XG4gICAgc2xpZGUuc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgfSk7XG4gIHNsaWRlc1tpbmRleF0uc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XG59XG5cbnNob3dTbGlkZXMoMCk7XG5cbmZ1bmN0aW9uIHBsdXNTbGlkZXMoKSB7XG4gIHNsaWRlSW5kZXggKz0gMTtcbiAgaWYgKHNsaWRlSW5kZXggPj0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xpZGVcIildLmxlbmd0aCkge1xuICAgIHNsaWRlSW5kZXggPSAwO1xuICB9XG4gIHNob3dTbGlkZXMoc2xpZGVJbmRleCk7XG59XG5cbmZ1bmN0aW9uIG1pbnVzU2xpZGVzKCkge1xuICBzbGlkZUluZGV4IC09IDE7XG4gIGlmIChzbGlkZUluZGV4IDwgMCkge1xuICAgIHNsaWRlSW5kZXggPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbGlkZVwiKV0ubGVuZ3RoIC0gMTtcbiAgfVxuICBzaG93U2xpZGVzKHNsaWRlSW5kZXgpO1xufVxuXG5jb25zdCBwcmV2QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJ1dHRvbi5wcmV2XCIpO1xuY29uc3QgbmV4dEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b24ubmV4dFwiKTtcblxucHJldkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbWludXNTbGlkZXMpO1xubmV4dEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcGx1c1NsaWRlcyk7XG5cbmZ1bmN0aW9uIGV4dHJhY3REYXRhKGZvcmVjYXN0KSB7XG4gIHJldHVybiB7XG4gICAgbG9jYXRpb246IGAke2ZvcmVjYXN0LmxvY2F0aW9uLm5hbWV9LCAke2ZvcmVjYXN0LmxvY2F0aW9uLmNvdW50cnl9YCxcbiAgICB0aW1lOiBmb3JlY2FzdC5jdXJyZW50Lmxhc3RfdXBkYXRlZCxcbiAgICBpc0RheTogZm9yZWNhc3QuY3VycmVudC5pc19kYXksXG4gICAgdGVtcDogZm9yZWNhc3QuY3VycmVudC50ZW1wX2MsXG4gICAgY29uZGl0aW9uX2NvZGU6IGZvcmVjYXN0LmN1cnJlbnQuY29uZGl0aW9uLmNvZGUsXG4gICAgY29uZGl0aW9uX3RleHQ6IGZvcmVjYXN0LmN1cnJlbnQuY29uZGl0aW9uLnRleHQsXG4gICAgZmVlbHNfbGlrZTogZm9yZWNhc3QuY3VycmVudC5mZWVsc2xpa2VfYyxcbiAgICBodW1pZGl0eTogZm9yZWNhc3QuY3VycmVudC5odW1pZGl0eSxcbiAgICB1dl9pbmRleDogZm9yZWNhc3QuY3VycmVudC51dixcbiAgICB3aW5kX2twaDogZm9yZWNhc3QuY3VycmVudC53aW5kX2twaCxcbiAgICB3aW5kX2RpcjogZm9yZWNhc3QuY3VycmVudC53aW5kX2RpcixcbiAgICB3aW5kX2RlZzogZm9yZWNhc3QuY3VycmVudC53aW5kX2RlZ3JlZSxcbiAgICBwcmVjaXA6IGZvcmVjYXN0LmN1cnJlbnQucHJlY2lwX21tLFxuICAgIGNsb3VkOiBmb3JlY2FzdC5jdXJyZW50LmNsb3VkLFxuICAgIGZvcmVjYXN0ZGF5OiBmb3JlY2FzdC5mb3JlY2FzdC5mb3JlY2FzdGRheS5tYXAoKGl0ZW0pID0+ICh7XG4gICAgICBzdW5yaXNlOiBpdGVtLmFzdHJvLnN1bnJpc2UsXG4gICAgICBzdW5zZXQ6IGl0ZW0uYXN0cm8uc3Vuc2V0LFxuICAgICAgbW9vbl9waGFzZTogaXRlbS5hc3Ryby5tb29uX3BoYXNlLFxuICAgICAgZGF0ZTogaXRlbS5kYXRlLFxuICAgICAgaG91cjogW1xuICAgICAgICB7XG4gICAgICAgICAgdGltZTogXCIwMDowMFwiLFxuICAgICAgICAgIHRlbXA6IGl0ZW0uaG91clswXS50ZW1wX2MsXG4gICAgICAgICAgY29uZGl0aW9uX2NvZGU6IGl0ZW0uaG91clswXS5jb25kaXRpb24uY29kZSxcbiAgICAgICAgICBjb25kaXRpb25fdGV4dDogaXRlbS5ob3VyWzBdLmNvbmRpdGlvbi50ZXh0LFxuICAgICAgICAgIGlzRGF5OiBpdGVtLmhvdXJbMF0uaXNfZGF5LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGltZTogXCIwNjowMFwiLFxuICAgICAgICAgIHRlbXA6IGl0ZW0uaG91cls2XS50ZW1wX2MsXG4gICAgICAgICAgY29uZGl0aW9uX2NvZGU6IGl0ZW0uaG91cls2XS5jb25kaXRpb24uY29kZSxcbiAgICAgICAgICBjb25kaXRpb25fdGV4dDogaXRlbS5ob3VyWzZdLmNvbmRpdGlvbi50ZXh0LFxuICAgICAgICAgIGlzRGF5OiBpdGVtLmhvdXJbNl0uaXNfZGF5LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGltZTogXCIxMjowMFwiLFxuICAgICAgICAgIHRlbXA6IGl0ZW0uaG91clsxMl0udGVtcF9jLFxuICAgICAgICAgIGNvbmRpdGlvbl9jb2RlOiBpdGVtLmhvdXJbMTJdLmNvbmRpdGlvbi5jb2RlLFxuICAgICAgICAgIGNvbmRpdGlvbl90ZXh0OiBpdGVtLmhvdXJbMTJdLmNvbmRpdGlvbi50ZXh0LFxuICAgICAgICAgIGlzRGF5OiBpdGVtLmhvdXJbMTJdLmlzX2RheSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRpbWU6IFwiMTg6MDBcIixcbiAgICAgICAgICB0ZW1wOiBpdGVtLmhvdXJbMThdLnRlbXBfYyxcbiAgICAgICAgICBjb25kaXRpb25fY29kZTogaXRlbS5ob3VyWzE4XS5jb25kaXRpb24uY29kZSxcbiAgICAgICAgICBjb25kaXRpb25fdGV4dDogaXRlbS5ob3VyWzE4XS5jb25kaXRpb24udGV4dCxcbiAgICAgICAgICBpc0RheTogaXRlbS5ob3VyWzE4XS5pc19kYXksXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pKSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gcG9wdWxhdGVQYWdlKHByb21pc2UpIHtcbiAgcHJvbWlzZS50aGVuKChkYXRhKSA9PiB7XG4gICAgY29uc3QgY3VycmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3VycmVudFwiKTtcbiAgICBjb25zdCBjaXR5ID0gY3VycmVudC5xdWVyeVNlbGVjdG9yKFwiLmNpdHlcIik7XG4gICAgY2l0eS50ZXh0Q29udGVudCA9IGRhdGEubG9jYXRpb247XG4gICAgY29uc3QgdGltZSA9IGN1cnJlbnQucXVlcnlTZWxlY3RvcihcIi5jdXJyZW50LXRpbWVcIik7XG4gICAgdGltZS50ZXh0Q29udGVudCA9IGRhdGEudGltZTtcbiAgICBjb25zdCB3ZWF0aGVySWNvbiA9IGN1cnJlbnQucXVlcnlTZWxlY3RvcihcIi5jdXJyZW50LXdlYXRoZXIgPiAuaWNvblwiKTtcbiAgICB3ZWF0aGVySWNvbi5zcmMgPSBnZXRJY29uKGRhdGEuY29uZGl0aW9uX2NvZGUsIGRhdGEuaXNEYXkpO1xuICAgIGNvbnN0IHdlYXRoZXJDb25kaXRpb24gPSBjdXJyZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jdXJyZW50LXdlYXRoZXIgPiAuY29uZGl0aW9uXCIsXG4gICAgKTtcbiAgICB3ZWF0aGVyQ29uZGl0aW9uLnRleHRDb250ZW50ID0gZGF0YS5jb25kaXRpb25fdGV4dDtcbiAgICBjb25zdCB0ZW1wID0gY3VycmVudC5xdWVyeVNlbGVjdG9yKFwiLmN1cnJlbnQtd2VhdGhlciA+IC50ZW1wXCIpO1xuICAgIHRlbXAudGV4dENvbnRlbnQgPSBgJHtkYXRhLnRlbXB9wrpDYDtcblxuICAgIGNvbnN0IGZlZWxzTGlrZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmVlbHMtbGlrZVwiKTtcbiAgICBmZWVsc0xpa2UudGV4dENvbnRlbnQgPSBgJHtkYXRhLmZlZWxzX2xpa2V9wrpDYDtcbiAgICBjb25zdCBodW1pZGl0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaHVtaWRpdHlcIik7XG4gICAgaHVtaWRpdHkudGV4dENvbnRlbnQgPSBgJHtkYXRhLmh1bWlkaXR5fSVgO1xuICAgIGNvbnN0IHV2SW5kZXggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnV2LWluZGV4XCIpO1xuICAgIHV2SW5kZXgudGV4dENvbnRlbnQgPSBkYXRhLnV2X2luZGV4O1xuICAgIGNvbnN0IHdpbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbmRcIik7XG4gICAgd2luZC50ZXh0Q29udGVudCA9IGAke2RhdGEud2luZF9rcGh9ICR7ZGF0YS53aW5kX2Rpcn1gO1xuICAgIGNvbnN0IHByZWNpcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJlY2lwXCIpO1xuICAgIHByZWNpcC50ZXh0Q29udGVudCA9IGAke2RhdGEucHJlY2lwfW1tYDtcbiAgICBjb25zdCBjbG91ZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xvdWRcIik7XG4gICAgY2xvdWQudGV4dENvbnRlbnQgPSBgJHtkYXRhLmNsb3VkfSVgO1xuXG4gICAgbGV0IGkgPSAwO1xuICAgIGNvbnN0IHNsaWRlcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlXCIpXTtcbiAgICBzbGlkZXMuZm9yRWFjaCgoc2xpZGUpID0+IHtcbiAgICAgIGNvbnN0IHN1bnJpc2VUZXh0ID0gc2xpZGUucXVlcnlTZWxlY3RvcihcIi5zdW5yaXNlID4gcFwiKTtcbiAgICAgIHN1bnJpc2VUZXh0LnRleHRDb250ZW50ID0gZGF0YS5mb3JlY2FzdGRheVtpXS5zdW5yaXNlO1xuICAgICAgY29uc3Qgc3VucmlzZUljb24gPSBzbGlkZS5xdWVyeVNlbGVjdG9yKCcuc3VucmlzZSA+IGltZycpO1xuICAgICAgc3VucmlzZUljb24uc3JjID0gU3VucmlzZTtcbiAgICAgIGNvbnN0IHN1bnNldFRleHQgPSBzbGlkZS5xdWVyeVNlbGVjdG9yKFwiLnN1bnNldCA+IHBcIik7XG4gICAgICBzdW5zZXRUZXh0LnRleHRDb250ZW50ID0gZGF0YS5mb3JlY2FzdGRheVtpXS5zdW5zZXQ7XG4gICAgICBjb25zdCBzdW5zZXRJY29uID0gc2xpZGUucXVlcnlTZWxlY3RvcignLnN1bnNldCA+IGltZycpO1xuICAgICAgc3Vuc2V0SWNvbi5zcmMgPSBTdW5zZXQ7XG4gICAgICBjb25zdCBtb29uUGhhc2VUZXh0ID0gc2xpZGUucXVlcnlTZWxlY3RvcihcIi5tb29uLXBoYXNlID4gcFwiKTtcbiAgICAgIG1vb25QaGFzZVRleHQudGV4dENvbnRlbnQgPSBkYXRhLmZvcmVjYXN0ZGF5W2ldLm1vb25fcGhhc2U7XG4gICAgICBjb25zdCBtb29uUGhhc2VJY29uID0gc2xpZGUucXVlcnlTZWxlY3RvcignLm1vb24tcGhhc2UgPiBpbWcnKTtcbiAgICAgIG1vb25QaGFzZUljb24uc3JjID0gZ2V0TW9vblBoYXNlKGRhdGEuZm9yZWNhc3RkYXlbaV0ubW9vbl9waGFzZSk7XG5cbiAgICAgIGxldCBqID0gMDtcbiAgICAgIFsuLi5zbGlkZS5xdWVyeVNlbGVjdG9yQWxsKFwiLmhvdXJcIildLmZvckVhY2goKGhvdXIpID0+IHtcbiAgICAgICAgY29uc3QgaWNvbiA9IGhvdXIucXVlcnlTZWxlY3RvcihcIi5pY29uXCIpO1xuICAgICAgICBpY29uLnNyYyA9IGdldEljb24oXG4gICAgICAgICAgZGF0YS5mb3JlY2FzdGRheVtpXS5ob3VyW2pdLmNvbmRpdGlvbl9jb2RlLFxuICAgICAgICAgIGRhdGEuZm9yZWNhc3RkYXlbaV0uaG91cltqXS5pc0RheSxcbiAgICAgICAgKTtcbiAgICAgICAgY29uc3QgY29uZGl0aW9uID0gaG91ci5xdWVyeVNlbGVjdG9yKFwiLmNvbmRpdGlvblwiKTtcbiAgICAgICAgY29uZGl0aW9uLnRleHRDb250ZW50ID0gZGF0YS5mb3JlY2FzdGRheVtpXS5ob3VyW2pdLmNvbmRpdGlvbl90ZXh0O1xuICAgICAgICBjb25zdCB0ZW1wZXJhdHVyZSA9IGhvdXIucXVlcnlTZWxlY3RvcihcIi50ZW1wXCIpO1xuICAgICAgICB0ZW1wZXJhdHVyZS50ZXh0Q29udGVudCA9IGAke2RhdGEuZm9yZWNhc3RkYXlbaV0uaG91cltqXS50ZW1wfcK6Q2A7XG4gICAgICAgIGogKz0gMTtcbiAgICAgIH0pO1xuICAgICAgaSArPSAxO1xuICAgIH0pO1xuICAgIHNsaWRlSW5kZXggPSAwO1xuICAgIHNob3dTbGlkZXMoc2xpZGVJbmRleCk7XG4gIH0pO1xufVxuXG5hc3luYyBmdW5jdGlvbiBnZXRGb3JlY2FzdERhdGEobG9jYXRpb24pIHtcbiAgc3RhcnRMb2FkKCk7XG4gIGNvbnN0IGZvcmVjYXN0UmVxdWVzdCA9IGF3YWl0IGZldGNoKFxuICAgIGBodHRwczovL2FwaS53ZWF0aGVyYXBpLmNvbS92MS9mb3JlY2FzdC5qc29uP2tleT1mZjQ2MzhmNTgzZWY0YWE2OThjMTE0OTE5MjMxMTA5JnE9JHtsb2NhdGlvbn0mZGF5cz0zYCxcbiAgICB7IG1vZGU6IFwiY29yc1wiIH0sXG4gICk7XG4gIGNvbnN0IGZvcmVjYXN0ID0gYXdhaXQgZm9yZWNhc3RSZXF1ZXN0Lmpzb24oKTtcbiAgY29uc29sZS5sb2coZm9yZWNhc3QpO1xuICBjb25zdCBkYXRhID0gZXh0cmFjdERhdGEoZm9yZWNhc3QpO1xuICBjb25zb2xlLmxvZyhkYXRhKTtcbiAgc3RvcExvYWQoKTtcbiAgcmV0dXJuIGRhdGE7XG59XG5cbnBvcHVsYXRlUGFnZShnZXRGb3JlY2FzdERhdGEoXCJQYXJpc1wiKSk7XG5cbmFzeW5jIGZ1bmN0aW9uIHNlYXJjaENpdGllcyhzdHIpIHtcbiAgaWYgKHN0ci50cmltKCkubGVuZ3RoID4gMCkge1xuICAgIGNvbnN0IG9wdGlvbnNSZXF1ZXN0ID0gYXdhaXQgZmV0Y2goXG4gICAgICBgaHR0cHM6Ly9hcGkud2VhdGhlcmFwaS5jb20vdjEvc2VhcmNoLmpzb24/a2V5PWZmNDYzOGY1ODNlZjRhYTY5OGMxMTQ5MTkyMzExMDkmcT0ke3N0cn1gLFxuICAgICAgeyBtb2RlOiBcImNvcnNcIiB9LFxuICAgICk7XG4gICAgaWYgKG9wdGlvbnNSZXF1ZXN0Lm9rKSB7XG4gICAgICBjb25zdCBvcHRpb25zID0gYXdhaXQgb3B0aW9uc1JlcXVlc3QuanNvbigpO1xuICAgICAgcmV0dXJuIG9wdGlvbnM7XG4gICAgfVxuICB9XG4gIHJldHVybiBbXTtcbn1cblxuY29uc3Qgc2VhcmNoID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImlucHV0XCIpO1xuY29uc3Qgc2VhcmNoQnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJ1dHRvblwiKTtcblxuY29uc3QgZm9ybSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJmb3JtXCIpO1xuXG5mb3JtLmFkZEV2ZW50TGlzdGVuZXIoXCJzdWJtaXRcIiwgKGV2KSA9PiB7XG4gIGV2LnByZXZlbnREZWZhdWx0KCk7XG59KTtcblxuc2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoXCJzZWFyY2hcIiwgKGV2KSA9PiB7XG4gIGV2LnByZXZlbnREZWZhdWx0KCk7XG59KTtcblxuZnVuY3Rpb24gc2VhcmNoU3RyKGUpIHtcbiAgY29uc3QgaW5kZXggPSBlLnRhcmdldC5nZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIpO1xuICBzZWFyY2hDaXRpZXMoc2VhcmNoLnZhbHVlKS50aGVuKChjaXRpZXMpID0+IHtcbiAgICBwb3B1bGF0ZVBhZ2UoZ2V0Rm9yZWNhc3REYXRhKGAke2NpdGllc1tpbmRleF0ubGF0fSwke2NpdGllc1tpbmRleF0ubG9ufWApKTtcbiAgICBmb3JtLnJlc2V0KCk7XG4gIH0pO1xufVxuXG5zZWFyY2hCdG4uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgc2VhcmNoQ2l0aWVzKHNlYXJjaC52YWx1ZSkudGhlbigoY2l0aWVzKSA9PiB7XG4gICAgaWYgKGNpdGllcy5sZW5ndGggPiAwKSB7XG4gICAgICBjb25zdCBjaG9pY2UgPSBjaXRpZXNbMF07XG4gICAgICBwb3B1bGF0ZVBhZ2UoZ2V0Rm9yZWNhc3REYXRhKGAke2Nob2ljZS5sYXR9LCR7Y2hvaWNlLmxvbn1gKSk7XG4gICAgICBjb25zb2xlLmxvZyhjaG9pY2UpO1xuICAgIH0gZWxzZSB7XG4gICAgICBjb25zb2xlLmxvZyhcIm5vIG9wdGlvbnMhXCIpO1xuICAgIH1cbiAgfSk7XG4gIGZvcm0ucmVzZXQoKTtcbn0pO1xuXG5zZWFyY2guYWRkRXZlbnRMaXN0ZW5lcihcImlucHV0XCIsICgpID0+IHtcbiAgY29uc3Qgc2VhcmNoQm94ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImRpdi5zZWFyY2gtYm94XCIpO1xuICBzZWFyY2hCb3gudGV4dENvbnRlbnQgPSBcIlwiO1xuICBzZWFyY2hDaXRpZXMoc2VhcmNoLnZhbHVlKS50aGVuKChjaXRpZXMpID0+IHtcbiAgICBsZXQgaW5kZXggPSAwO1xuICAgIGNpdGllcy5mb3JFYWNoKChpdGVtKSA9PiB7XG4gICAgICBjb25zdCBjaXR5ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICAgIGNpdHkuY2xhc3NMaXN0LmFkZChcImNpdHktb3B0aW9uXCIpO1xuICAgICAgY2l0eS5zZXRBdHRyaWJ1dGUoXCJkYXRhLWluZGV4XCIsIGluZGV4KTtcbiAgICAgIGNpdHkuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIHNlYXJjaFN0cik7XG4gICAgICBjaXR5LnRleHRDb250ZW50ID0gaXRlbS5yZWdpb25cbiAgICAgICAgPyBgJHtpdGVtLm5hbWV9LCAke2l0ZW0ucmVnaW9ufSwgJHtpdGVtLmNvdW50cnl9YFxuICAgICAgICA6IGAke2l0ZW0ubmFtZX0sICR7aXRlbS5jb3VudHJ5fWA7XG4gICAgICBzZWFyY2hCb3guYXBwZW5kQ2hpbGQoY2l0eSk7XG4gICAgICBpbmRleCArPSAxO1xuICAgIH0pO1xuICB9KTtcbn0pO1xuXG5zZWFyY2guYWRkRXZlbnRMaXN0ZW5lcihcImZvY3VzXCIsICgpID0+IHtcbiAgY29uc3Qgc2VhcmNoQm94ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgc2VhcmNoQm94LmNsYXNzTGlzdC5hZGQoXCJzZWFyY2gtYm94XCIpO1xuICBzZWFyY2gucGFyZW50RWxlbWVudC5hcHBlbmRDaGlsZChzZWFyY2hCb3gpO1xufSk7XG5cbnNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNvdXRcIiwgKCkgPT4ge1xuICBjb25zdCBzZWFyY2hCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2LnNlYXJjaC1ib3hcIik7XG4gIHNldFRpbWVvdXQoKCkgPT4ge1xuICAgIHNlYXJjaEJveC5yZW1vdmUoKTtcbiAgfSwgMzAwKTtcbn0pO1xuIl0sIm5hbWVzIjpbXSwic291cmNlUm9vdCI6IiJ9