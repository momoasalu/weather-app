/******/ (() => { // webpackBootstrap
/******/ 	"use strict";
/******/ 	var __webpack_modules__ = ({

/***/ "./src/icons/blizzard.png":
/*!********************************!*\
  !*** ./src/icons/blizzard.png ***!
  \********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "0b2610d13cae81d00d68.png";

/***/ }),

/***/ "./src/icons/cloud.png":
/*!*****************************!*\
  !*** ./src/icons/cloud.png ***!
  \*****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "99639dceda40aacaffc4.png";

/***/ }),

/***/ "./src/icons/cloudy-day.png":
/*!**********************************!*\
  !*** ./src/icons/cloudy-day.png ***!
  \**********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "5368d4f29ddbbd82fefc.png";

/***/ }),

/***/ "./src/icons/cloudy-night.png":
/*!************************************!*\
  !*** ./src/icons/cloudy-night.png ***!
  \************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "f85a9b508ebb8293c657.png";

/***/ }),

/***/ "./src/icons/downpour.png":
/*!********************************!*\
  !*** ./src/icons/downpour.png ***!
  \********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "c455d74d114dffbe48c2.png";

/***/ }),

/***/ "./src/icons/drizzle-day.png":
/*!***********************************!*\
  !*** ./src/icons/drizzle-day.png ***!
  \***********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "55e9d5adb94aa3d29f26.png";

/***/ }),

/***/ "./src/icons/drizzle-night.png":
/*!*************************************!*\
  !*** ./src/icons/drizzle-night.png ***!
  \*************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "4463564966bfacbe1411.png";

/***/ }),

/***/ "./src/icons/foggy-day.png":
/*!*********************************!*\
  !*** ./src/icons/foggy-day.png ***!
  \*********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "acc07f532504d68576c1.png";

/***/ }),

/***/ "./src/icons/foggy-night.png":
/*!***********************************!*\
  !*** ./src/icons/foggy-night.png ***!
  \***********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "2de51fd3f9c4faafc34a.png";

/***/ }),

/***/ "./src/icons/full-moon.png":
/*!*********************************!*\
  !*** ./src/icons/full-moon.png ***!
  \*********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "6bdfbff96cc820a57197.png";

/***/ }),

/***/ "./src/icons/hailstone.png":
/*!*********************************!*\
  !*** ./src/icons/hailstone.png ***!
  \*********************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "0f9ae87ef7aa51180def.png";

/***/ }),

/***/ "./src/icons/lightning-bolt.png":
/*!**************************************!*\
  !*** ./src/icons/lightning-bolt.png ***!
  \**************************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "22b84a4c5c9f9e2d2a99.png";

/***/ }),

/***/ "./src/icons/rain.png":
/*!****************************!*\
  !*** ./src/icons/rain.png ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "a8fde1c5bd6c19919171.png";

/***/ }),

/***/ "./src/icons/snow.png":
/*!****************************!*\
  !*** ./src/icons/snow.png ***!
  \****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "5005994670bf870f327c.png";

/***/ }),

/***/ "./src/icons/storm.png":
/*!*****************************!*\
  !*** ./src/icons/storm.png ***!
  \*****************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "2284774f0e17bde2c3f9.png";

/***/ }),

/***/ "./src/icons/sun.png":
/*!***************************!*\
  !*** ./src/icons/sun.png ***!
  \***************************/
/***/ ((module, __unused_webpack_exports, __webpack_require__) => {

module.exports = __webpack_require__.p + "1d91796c35a91419dd21.png";

/***/ })

/******/ 	});
/************************************************************************/
/******/ 	// The module cache
/******/ 	var __webpack_module_cache__ = {};
/******/ 	
/******/ 	// The require function
/******/ 	function __webpack_require__(moduleId) {
/******/ 		// Check if module is in cache
/******/ 		var cachedModule = __webpack_module_cache__[moduleId];
/******/ 		if (cachedModule !== undefined) {
/******/ 			return cachedModule.exports;
/******/ 		}
/******/ 		// Create a new module (and put it into the cache)
/******/ 		var module = __webpack_module_cache__[moduleId] = {
/******/ 			// no module.id needed
/******/ 			// no module.loaded needed
/******/ 			exports: {}
/******/ 		};
/******/ 	
/******/ 		// Execute the module function
/******/ 		__webpack_modules__[moduleId](module, module.exports, __webpack_require__);
/******/ 	
/******/ 		// Return the exports of the module
/******/ 		return module.exports;
/******/ 	}
/******/ 	
/************************************************************************/
/******/ 	/* webpack/runtime/global */
/******/ 	(() => {
/******/ 		__webpack_require__.g = (function() {
/******/ 			if (typeof globalThis === 'object') return globalThis;
/******/ 			try {
/******/ 				return this || new Function('return this')();
/******/ 			} catch (e) {
/******/ 				if (typeof window === 'object') return window;
/******/ 			}
/******/ 		})();
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/make namespace object */
/******/ 	(() => {
/******/ 		// define __esModule on exports
/******/ 		__webpack_require__.r = (exports) => {
/******/ 			if(typeof Symbol !== 'undefined' && Symbol.toStringTag) {
/******/ 				Object.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });
/******/ 			}
/******/ 			Object.defineProperty(exports, '__esModule', { value: true });
/******/ 		};
/******/ 	})();
/******/ 	
/******/ 	/* webpack/runtime/publicPath */
/******/ 	(() => {
/******/ 		var scriptUrl;
/******/ 		if (__webpack_require__.g.importScripts) scriptUrl = __webpack_require__.g.location + "";
/******/ 		var document = __webpack_require__.g.document;
/******/ 		if (!scriptUrl && document) {
/******/ 			if (document.currentScript)
/******/ 				scriptUrl = document.currentScript.src;
/******/ 			if (!scriptUrl) {
/******/ 				var scripts = document.getElementsByTagName("script");
/******/ 				if(scripts.length) {
/******/ 					var i = scripts.length - 1;
/******/ 					while (i > -1 && !scriptUrl) scriptUrl = scripts[i--].src;
/******/ 				}
/******/ 			}
/******/ 		}
/******/ 		// When supporting browsers where an automatic publicPath is not supported you must specify an output.publicPath manually via configuration
/******/ 		// or pass an empty string ("") and set the __webpack_public_path__ variable from your code to use your own logic.
/******/ 		if (!scriptUrl) throw new Error("Automatic publicPath is not supported in this browser");
/******/ 		scriptUrl = scriptUrl.replace(/#.*$/, "").replace(/\?.*$/, "").replace(/\/[^\/]+$/, "/");
/******/ 		__webpack_require__.p = scriptUrl;
/******/ 	})();
/******/ 	
/************************************************************************/
var __webpack_exports__ = {};
// This entry need to be wrapped in an IIFE because it need to be isolated against other modules in the chunk.
(() => {
/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/
__webpack_require__.r(__webpack_exports__);
/* harmony import */ var _icons_sun_png__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./icons/sun.png */ "./src/icons/sun.png");
/* harmony import */ var _icons_full_moon_png__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./icons/full-moon.png */ "./src/icons/full-moon.png");
/* harmony import */ var _icons_cloudy_day_png__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(/*! ./icons/cloudy-day.png */ "./src/icons/cloudy-day.png");
/* harmony import */ var _icons_cloudy_night_png__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(/*! ./icons/cloudy-night.png */ "./src/icons/cloudy-night.png");
/* harmony import */ var _icons_cloud_png__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(/*! ./icons/cloud.png */ "./src/icons/cloud.png");
/* harmony import */ var _icons_foggy_day_png__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(/*! ./icons/foggy-day.png */ "./src/icons/foggy-day.png");
/* harmony import */ var _icons_foggy_night_png__WEBPACK_IMPORTED_MODULE_6__ = __webpack_require__(/*! ./icons/foggy-night.png */ "./src/icons/foggy-night.png");
/* harmony import */ var _icons_drizzle_day_png__WEBPACK_IMPORTED_MODULE_7__ = __webpack_require__(/*! ./icons/drizzle-day.png */ "./src/icons/drizzle-day.png");
/* harmony import */ var _icons_drizzle_night_png__WEBPACK_IMPORTED_MODULE_8__ = __webpack_require__(/*! ./icons/drizzle-night.png */ "./src/icons/drizzle-night.png");
/* harmony import */ var _icons_snow_png__WEBPACK_IMPORTED_MODULE_9__ = __webpack_require__(/*! ./icons/snow.png */ "./src/icons/snow.png");
/* harmony import */ var _icons_downpour_png__WEBPACK_IMPORTED_MODULE_10__ = __webpack_require__(/*! ./icons/downpour.png */ "./src/icons/downpour.png");
/* harmony import */ var _icons_lightning_bolt_png__WEBPACK_IMPORTED_MODULE_11__ = __webpack_require__(/*! ./icons/lightning-bolt.png */ "./src/icons/lightning-bolt.png");
/* harmony import */ var _icons_rain_png__WEBPACK_IMPORTED_MODULE_12__ = __webpack_require__(/*! ./icons/rain.png */ "./src/icons/rain.png");
/* harmony import */ var _icons_storm_png__WEBPACK_IMPORTED_MODULE_13__ = __webpack_require__(/*! ./icons/storm.png */ "./src/icons/storm.png");
/* harmony import */ var _icons_blizzard_png__WEBPACK_IMPORTED_MODULE_14__ = __webpack_require__(/*! ./icons/blizzard.png */ "./src/icons/blizzard.png");
/* harmony import */ var _icons_hailstone_png__WEBPACK_IMPORTED_MODULE_15__ = __webpack_require__(/*! ./icons/hailstone.png */ "./src/icons/hailstone.png");

















function getIcon(code, isDay) {
  let src;
  switch (code) {
    case 1000:
      src = isDay ? _icons_sun_png__WEBPACK_IMPORTED_MODULE_0__ : _icons_full_moon_png__WEBPACK_IMPORTED_MODULE_1__;
      break;
    case 1003:
    case 1006:
      src = isDay ? _icons_cloudy_day_png__WEBPACK_IMPORTED_MODULE_2__ : _icons_cloudy_night_png__WEBPACK_IMPORTED_MODULE_3__;
      break;
    case 1009:
      src = _icons_cloud_png__WEBPACK_IMPORTED_MODULE_4__;
      break;
    case 1030:
    case 1135:
    case 1147:
      src = isDay ? _icons_foggy_day_png__WEBPACK_IMPORTED_MODULE_5__ : _icons_foggy_night_png__WEBPACK_IMPORTED_MODULE_6__;
      break;
    case 1063:
    case 1066:
    case 1069:
    case 1072:
    case 1150:
    case 1153:
    case 1168:
    case 1171:
      src = isDay ? _icons_drizzle_day_png__WEBPACK_IMPORTED_MODULE_7__ : _icons_drizzle_night_png__WEBPACK_IMPORTED_MODULE_8__;
      break;
    case 1087:
      src = _icons_lightning_bolt_png__WEBPACK_IMPORTED_MODULE_11__;
      break;
    case 1114:
    case 1210:
    case 1213:
    case 1216:
    case 1219:
    case 1222:
    case 1225:
    case 1255:
    case 1258:
      src = _icons_snow_png__WEBPACK_IMPORTED_MODULE_9__;
      break;
    case 1117:
      src = _icons_blizzard_png__WEBPACK_IMPORTED_MODULE_14__;
      break;
    case 1180:
    case 1183:
    case 1186:
    case 1189:
    case 1192:
    case 1240:
    case 1243:
    case 1246:
      src = _icons_rain_png__WEBPACK_IMPORTED_MODULE_12__;
      break;
    case 1195:
    case 1198:
    case 1201:
    case 1204:
    case 1207:
    case 1249:
    case 1252:
      src = _icons_downpour_png__WEBPACK_IMPORTED_MODULE_10__;
      break;
    case 1237:
    case 1261:
    case 1264:
      src = _icons_hailstone_png__WEBPACK_IMPORTED_MODULE_15__;
      break;
    case 1273:
    case 1276:
    case 1279:
    case 1282:
      src = _icons_storm_png__WEBPACK_IMPORTED_MODULE_13__;
      break;
    default:
      src = "weird! no option here?";
      break;
  }
  return src;
}

function startLoad() {
  console.log("loading...");
}

function stopLoad() {
  console.log("done!");
}

let slideIndex = 0;

function showSlides(index) {
  const slides = [...document.querySelectorAll(".slide")];
  slides.forEach((slide) => {
    slide.style.setProperty("display", "none");
  });
  slides[index].style.setProperty("display", "block");
}

showSlides(0);

function plusSlides() {
  slideIndex += 1;
  if (slideIndex >= [...document.querySelectorAll(".slide")].length) {
    slideIndex = 0;
  }
  showSlides(slideIndex);
}

function minusSlides() {
  slideIndex -= 1;
  if (slideIndex < 0) {
    slideIndex = [...document.querySelectorAll(".slide")].length - 1;
  }
  showSlides(slideIndex);
}

const prevBtn = document.querySelector("button.prev");
const nextBtn = document.querySelector("button.next");

prevBtn.addEventListener("click", minusSlides);
nextBtn.addEventListener("click", plusSlides);

function extractData(forecast) {
  return {
    location: `${forecast.location.name}, ${forecast.location.country}`,
    time: forecast.current.last_updated,
    isDay: forecast.current.is_day,
    temp: forecast.current.temp_c,
    condition_code: forecast.current.condition.code,
    condition_text: forecast.current.condition.text,
    feels_like: forecast.current.feelslike_c,
    humidity: forecast.current.humidity,
    uv_index: forecast.current.uv,
    wind_kph: forecast.current.wind_kph,
    wind_dir: forecast.current.wind_dir,
    wind_deg: forecast.current.wind_degree,
    precip: forecast.current.precip_mm,
    cloud: forecast.current.cloud,
    forecastday: forecast.forecast.forecastday.map((item) => ({
      sunrise: item.astro.sunrise,
      sunset: item.astro.sunset,
      moon_phase: item.astro.moon_phase,
      date: item.date,
      hour: [
        {
          time: "00:00",
          temp: item.hour[0].temp_c,
          condition_code: item.hour[0].condition.code,
          condition_text: item.hour[0].condition.text,
          isDay: item.hour[0].is_day,
        },
        {
          time: "06:00",
          temp: item.hour[6].temp_c,
          condition_code: item.hour[6].condition.code,
          condition_text: item.hour[6].condition.text,
          isDay: item.hour[6].is_day,
        },
        {
          time: "12:00",
          temp: item.hour[12].temp_c,
          condition_code: item.hour[12].condition.code,
          condition_text: item.hour[12].condition.text,
          isDay: item.hour[12].is_day,
        },
        {
          time: "18:00",
          temp: item.hour[18].temp_c,
          condition_code: item.hour[18].condition.code,
          condition_text: item.hour[18].condition.text,
          isDay: item.hour[18].is_day,
        },
      ],
    })),
  };
}

function populatePage(promise) {
  promise.then((data) => {
    const current = document.querySelector(".current");
    const city = current.querySelector(".city");
    city.textContent = data.location;
    const time = current.querySelector(".current-time");
    time.textContent = data.time;
    const weatherIcon = current.querySelector(".current-weather > .icon");
    console.log(data.condition_code);
    weatherIcon.src = getIcon(data.condition_code, data.isDay);
    const weatherCondition = current.querySelector(
      ".current-weather > .condition",
    );
    weatherCondition.textContent = data.condition_text;
    const temp = current.querySelector(".current-weather > .temp");
    temp.textContent = `${data.temp}ºC`;

    const feelsLike = document.querySelector(".feels-like");
    feelsLike.textContent = `${data.feels_like}ºC`;
    const humidity = document.querySelector(".humidity");
    humidity.textContent = `${data.humidity}%`;
    const uvIndex = document.querySelector(".uv-index");
    uvIndex.textContent = data.uv_index;
    const wind = document.querySelector(".wind");
    wind.textContent = `${data.wind_kph} ${data.wind_dir}`;
    const precip = document.querySelector(".precip");
    precip.textContent = `${data.precip}mm`;
    const cloud = document.querySelector(".cloud");
    cloud.textContent = `${data.cloud}%`;

    let i = 0;
    const slides = [...document.querySelectorAll(".slide")];
    slides.forEach((slide) => {
      const sunrise = slide.querySelector(".sunrise");
      sunrise.textContent = data.forecastday[i].sunrise;
      const sunset = slide.querySelector(".sunset");
      sunset.textContent = data.forecastday[i].sunset;
      const moonPhase = slide.querySelector(".moon-phase");
      moonPhase.textContent = data.forecastday[i].moon_phase;

      let j = 0;
      [...slide.querySelectorAll(".hour")].forEach((hour) => {
        const icon = hour.querySelector(".icon");
        icon.src = getIcon(
          data.forecastday[i].hour[j].condition_code,
          data.forecastday[i].hour[j].isDay,
        );
        const condition = hour.querySelector(".condition");
        condition.textContent = data.forecastday[i].hour[j].condition_text;
        const temperature = hour.querySelector(".temp");
        temperature.textContent = `${data.forecastday[i].hour[j].temp}ºC`;
        j += 1;
      });
      i += 1;
    });
    slideIndex = 0;
    showSlides(slideIndex);
  });
}

async function getForecastData(location) {
  startLoad();
  const forecastRequest = await fetch(
    `https://api.weatherapi.com/v1/forecast.json?key=ff4638f583ef4aa698c114919231109&q=${location}&days=3`,
    { mode: "cors" },
  );
  const forecast = await forecastRequest.json();
  console.log(forecast);
  const data = extractData(forecast);
  console.log(data);
  stopLoad();
  return data;
}

populatePage(getForecastData("Paris"));

async function searchCities(str) {
  if (str.trim().length > 0) {
    const optionsRequest = await fetch(
      `https://api.weatherapi.com/v1/search.json?key=ff4638f583ef4aa698c114919231109&q=${str}`,
      { mode: "cors" },
    );
    if (optionsRequest.ok) {
      const options = await optionsRequest.json();
      return options;
    }
  }
  return [];
}

const search = document.querySelector("input");
const searchBtn = document.querySelector("button");

const form = document.querySelector("form");

form.addEventListener("submit", (ev) => {
  ev.preventDefault();
});

search.addEventListener("search", (ev) => {
  ev.preventDefault();
});

function searchStr(e) {
  const index = e.target.getAttribute("data-index");
  searchCities(search.value).then((cities) => {
    populatePage(getForecastData(`${cities[index].lat},${cities[index].lon}`));
    form.reset();
  });
}

searchBtn.addEventListener("click", () => {
  searchCities(search.value).then((cities) => {
    if (cities.length > 0) {
      const choice = cities[0];
      populatePage(getForecastData(`${choice.lat},${choice.lon}`));
      console.log(choice);
    } else {
      console.log("no options!");
    }
  });
  form.reset();
});

search.addEventListener("input", () => {
  const searchBox = document.querySelector("div.search-box");
  searchBox.textContent = "";
  searchCities(search.value).then((cities) => {
    let index = 0;
    cities.forEach((item) => {
      const city = document.createElement("div");
      city.classList.add("city-option");
      city.setAttribute("data-index", index);
      city.addEventListener("click", searchStr);
      city.textContent = item.region
        ? `${item.name}, ${item.region}, ${item.country}`
        : `${item.name}, ${item.country}`;
      searchBox.appendChild(city);
      index += 1;
    });
  });
});

search.addEventListener("focus", () => {
  const searchBox = document.createElement("div");
  searchBox.classList.add("search-box");
  search.parentElement.appendChild(searchBox);
});

search.addEventListener("focusout", () => {
  const searchBox = document.querySelector("div.search-box");
  setTimeout(() => {
    searchBox.remove();
  }, 300);
});

})();

/******/ })()
;
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFDTCxHQUFHO0FBQ0gsQ0FBQzs7QUFFRDtBQUNBO0FBQ0E7QUFDQTtBQUNBLENBQUM7O0FBRUQ7QUFDQTtBQUNBO0FBQ0E7QUFDQSxHQUFHO0FBQ0gsQ0FBQyIsInNvdXJjZXMiOlsid2VicGFjazovL3dlYXRoZXItYXBwL3dlYnBhY2svYm9vdHN0cmFwIiwid2VicGFjazovL3dlYXRoZXItYXBwL3dlYnBhY2svcnVudGltZS9nbG9iYWwiLCJ3ZWJwYWNrOi8vd2VhdGhlci1hcHAvd2VicGFjay9ydW50aW1lL21ha2UgbmFtZXNwYWNlIG9iamVjdCIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly93ZWF0aGVyLWFwcC8uL3NyYy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyIvLyBUaGUgbW9kdWxlIGNhY2hlXG52YXIgX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fID0ge307XG5cbi8vIFRoZSByZXF1aXJlIGZ1bmN0aW9uXG5mdW5jdGlvbiBfX3dlYnBhY2tfcmVxdWlyZV9fKG1vZHVsZUlkKSB7XG5cdC8vIENoZWNrIGlmIG1vZHVsZSBpcyBpbiBjYWNoZVxuXHR2YXIgY2FjaGVkTW9kdWxlID0gX193ZWJwYWNrX21vZHVsZV9jYWNoZV9fW21vZHVsZUlkXTtcblx0aWYgKGNhY2hlZE1vZHVsZSAhPT0gdW5kZWZpbmVkKSB7XG5cdFx0cmV0dXJuIGNhY2hlZE1vZHVsZS5leHBvcnRzO1xuXHR9XG5cdC8vIENyZWF0ZSBhIG5ldyBtb2R1bGUgKGFuZCBwdXQgaXQgaW50byB0aGUgY2FjaGUpXG5cdHZhciBtb2R1bGUgPSBfX3dlYnBhY2tfbW9kdWxlX2NhY2hlX19bbW9kdWxlSWRdID0ge1xuXHRcdC8vIG5vIG1vZHVsZS5pZCBuZWVkZWRcblx0XHQvLyBubyBtb2R1bGUubG9hZGVkIG5lZWRlZFxuXHRcdGV4cG9ydHM6IHt9XG5cdH07XG5cblx0Ly8gRXhlY3V0ZSB0aGUgbW9kdWxlIGZ1bmN0aW9uXG5cdF9fd2VicGFja19tb2R1bGVzX19bbW9kdWxlSWRdKG1vZHVsZSwgbW9kdWxlLmV4cG9ydHMsIF9fd2VicGFja19yZXF1aXJlX18pO1xuXG5cdC8vIFJldHVybiB0aGUgZXhwb3J0cyBvZiB0aGUgbW9kdWxlXG5cdHJldHVybiBtb2R1bGUuZXhwb3J0cztcbn1cblxuIiwiX193ZWJwYWNrX3JlcXVpcmVfXy5nID0gKGZ1bmN0aW9uKCkge1xuXHRpZiAodHlwZW9mIGdsb2JhbFRoaXMgPT09ICdvYmplY3QnKSByZXR1cm4gZ2xvYmFsVGhpcztcblx0dHJ5IHtcblx0XHRyZXR1cm4gdGhpcyB8fCBuZXcgRnVuY3Rpb24oJ3JldHVybiB0aGlzJykoKTtcblx0fSBjYXRjaCAoZSkge1xuXHRcdGlmICh0eXBlb2Ygd2luZG93ID09PSAnb2JqZWN0JykgcmV0dXJuIHdpbmRvdztcblx0fVxufSkoKTsiLCIvLyBkZWZpbmUgX19lc01vZHVsZSBvbiBleHBvcnRzXG5fX3dlYnBhY2tfcmVxdWlyZV9fLnIgPSAoZXhwb3J0cykgPT4ge1xuXHRpZih0eXBlb2YgU3ltYm9sICE9PSAndW5kZWZpbmVkJyAmJiBTeW1ib2wudG9TdHJpbmdUYWcpIHtcblx0XHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgU3ltYm9sLnRvU3RyaW5nVGFnLCB7IHZhbHVlOiAnTW9kdWxlJyB9KTtcblx0fVxuXHRPYmplY3QuZGVmaW5lUHJvcGVydHkoZXhwb3J0cywgJ19fZXNNb2R1bGUnLCB7IHZhbHVlOiB0cnVlIH0pO1xufTsiLCJ2YXIgc2NyaXB0VXJsO1xuaWYgKF9fd2VicGFja19yZXF1aXJlX18uZy5pbXBvcnRTY3JpcHRzKSBzY3JpcHRVcmwgPSBfX3dlYnBhY2tfcmVxdWlyZV9fLmcubG9jYXRpb24gKyBcIlwiO1xudmFyIGRvY3VtZW50ID0gX193ZWJwYWNrX3JlcXVpcmVfXy5nLmRvY3VtZW50O1xuaWYgKCFzY3JpcHRVcmwgJiYgZG9jdW1lbnQpIHtcblx0aWYgKGRvY3VtZW50LmN1cnJlbnRTY3JpcHQpXG5cdFx0c2NyaXB0VXJsID0gZG9jdW1lbnQuY3VycmVudFNjcmlwdC5zcmM7XG5cdGlmICghc2NyaXB0VXJsKSB7XG5cdFx0dmFyIHNjcmlwdHMgPSBkb2N1bWVudC5nZXRFbGVtZW50c0J5VGFnTmFtZShcInNjcmlwdFwiKTtcblx0XHRpZihzY3JpcHRzLmxlbmd0aCkge1xuXHRcdFx0dmFyIGkgPSBzY3JpcHRzLmxlbmd0aCAtIDE7XG5cdFx0XHR3aGlsZSAoaSA+IC0xICYmICFzY3JpcHRVcmwpIHNjcmlwdFVybCA9IHNjcmlwdHNbaS0tXS5zcmM7XG5cdFx0fVxuXHR9XG59XG4vLyBXaGVuIHN1cHBvcnRpbmcgYnJvd3NlcnMgd2hlcmUgYW4gYXV0b21hdGljIHB1YmxpY1BhdGggaXMgbm90IHN1cHBvcnRlZCB5b3UgbXVzdCBzcGVjaWZ5IGFuIG91dHB1dC5wdWJsaWNQYXRoIG1hbnVhbGx5IHZpYSBjb25maWd1cmF0aW9uXG4vLyBvciBwYXNzIGFuIGVtcHR5IHN0cmluZyAoXCJcIikgYW5kIHNldCB0aGUgX193ZWJwYWNrX3B1YmxpY19wYXRoX18gdmFyaWFibGUgZnJvbSB5b3VyIGNvZGUgdG8gdXNlIHlvdXIgb3duIGxvZ2ljLlxuaWYgKCFzY3JpcHRVcmwpIHRocm93IG5ldyBFcnJvcihcIkF1dG9tYXRpYyBwdWJsaWNQYXRoIGlzIG5vdCBzdXBwb3J0ZWQgaW4gdGhpcyBicm93c2VyXCIpO1xuc2NyaXB0VXJsID0gc2NyaXB0VXJsLnJlcGxhY2UoLyMuKiQvLCBcIlwiKS5yZXBsYWNlKC9cXD8uKiQvLCBcIlwiKS5yZXBsYWNlKC9cXC9bXlxcL10rJC8sIFwiL1wiKTtcbl9fd2VicGFja19yZXF1aXJlX18ucCA9IHNjcmlwdFVybDsiLCJpbXBvcnQgU3VubnkgZnJvbSBcIi4vaWNvbnMvc3VuLnBuZ1wiO1xuaW1wb3J0IENsZWFyIGZyb20gXCIuL2ljb25zL2Z1bGwtbW9vbi5wbmdcIjtcbmltcG9ydCBDbG91ZHlEYXkgZnJvbSBcIi4vaWNvbnMvY2xvdWR5LWRheS5wbmdcIjtcbmltcG9ydCBDbG91ZHlOaWdodCBmcm9tIFwiLi9pY29ucy9jbG91ZHktbmlnaHQucG5nXCI7XG5pbXBvcnQgT3ZlcmNhc3QgZnJvbSBcIi4vaWNvbnMvY2xvdWQucG5nXCI7XG5pbXBvcnQgTWlzdHlEYXkgZnJvbSBcIi4vaWNvbnMvZm9nZ3ktZGF5LnBuZ1wiO1xuaW1wb3J0IE1pc3R5TmlnaHQgZnJvbSBcIi4vaWNvbnMvZm9nZ3ktbmlnaHQucG5nXCI7XG5pbXBvcnQgRHJpenpsZURheSBmcm9tIFwiLi9pY29ucy9kcml6emxlLWRheS5wbmdcIjtcbmltcG9ydCBEcml6emxlTmlnaHQgZnJvbSBcIi4vaWNvbnMvZHJpenpsZS1uaWdodC5wbmdcIjtcbmltcG9ydCBTbm93IGZyb20gXCIuL2ljb25zL3Nub3cucG5nXCI7XG5pbXBvcnQgU2xlZXQgZnJvbSBcIi4vaWNvbnMvZG93bnBvdXIucG5nXCI7XG5pbXBvcnQgVGh1bmRlciBmcm9tIFwiLi9pY29ucy9saWdodG5pbmctYm9sdC5wbmdcIjtcbmltcG9ydCBSYWluIGZyb20gXCIuL2ljb25zL3JhaW4ucG5nXCI7XG5pbXBvcnQgU3Rvcm0gZnJvbSBcIi4vaWNvbnMvc3Rvcm0ucG5nXCI7XG5pbXBvcnQgQmxpenphcmQgZnJvbSBcIi4vaWNvbnMvYmxpenphcmQucG5nXCI7XG5pbXBvcnQgSGFpbHN0b25lIGZyb20gXCIuL2ljb25zL2hhaWxzdG9uZS5wbmdcIjtcblxuZnVuY3Rpb24gZ2V0SWNvbihjb2RlLCBpc0RheSkge1xuICBsZXQgc3JjO1xuICBzd2l0Y2ggKGNvZGUpIHtcbiAgICBjYXNlIDEwMDA6XG4gICAgICBzcmMgPSBpc0RheSA/IFN1bm55IDogQ2xlYXI7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEwMDM6XG4gICAgY2FzZSAxMDA2OlxuICAgICAgc3JjID0gaXNEYXkgPyBDbG91ZHlEYXkgOiBDbG91ZHlOaWdodDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTAwOTpcbiAgICAgIHNyYyA9IE92ZXJjYXN0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMDMwOlxuICAgIGNhc2UgMTEzNTpcbiAgICBjYXNlIDExNDc6XG4gICAgICBzcmMgPSBpc0RheSA/IE1pc3R5RGF5IDogTWlzdHlOaWdodDtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTA2MzpcbiAgICBjYXNlIDEwNjY6XG4gICAgY2FzZSAxMDY5OlxuICAgIGNhc2UgMTA3MjpcbiAgICBjYXNlIDExNTA6XG4gICAgY2FzZSAxMTUzOlxuICAgIGNhc2UgMTE2ODpcbiAgICBjYXNlIDExNzE6XG4gICAgICBzcmMgPSBpc0RheSA/IERyaXp6bGVEYXkgOiBEcml6emxlTmlnaHQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEwODc6XG4gICAgICBzcmMgPSBUaHVuZGVyO1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTE0OlxuICAgIGNhc2UgMTIxMDpcbiAgICBjYXNlIDEyMTM6XG4gICAgY2FzZSAxMjE2OlxuICAgIGNhc2UgMTIxOTpcbiAgICBjYXNlIDEyMjI6XG4gICAgY2FzZSAxMjI1OlxuICAgIGNhc2UgMTI1NTpcbiAgICBjYXNlIDEyNTg6XG4gICAgICBzcmMgPSBTbm93O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMTE3OlxuICAgICAgc3JjID0gQmxpenphcmQ7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDExODA6XG4gICAgY2FzZSAxMTgzOlxuICAgIGNhc2UgMTE4NjpcbiAgICBjYXNlIDExODk6XG4gICAgY2FzZSAxMTkyOlxuICAgIGNhc2UgMTI0MDpcbiAgICBjYXNlIDEyNDM6XG4gICAgY2FzZSAxMjQ2OlxuICAgICAgc3JjID0gUmFpbjtcbiAgICAgIGJyZWFrO1xuICAgIGNhc2UgMTE5NTpcbiAgICBjYXNlIDExOTg6XG4gICAgY2FzZSAxMjAxOlxuICAgIGNhc2UgMTIwNDpcbiAgICBjYXNlIDEyMDc6XG4gICAgY2FzZSAxMjQ5OlxuICAgIGNhc2UgMTI1MjpcbiAgICAgIHNyYyA9IFNsZWV0O1xuICAgICAgYnJlYWs7XG4gICAgY2FzZSAxMjM3OlxuICAgIGNhc2UgMTI2MTpcbiAgICBjYXNlIDEyNjQ6XG4gICAgICBzcmMgPSBIYWlsc3RvbmU7XG4gICAgICBicmVhaztcbiAgICBjYXNlIDEyNzM6XG4gICAgY2FzZSAxMjc2OlxuICAgIGNhc2UgMTI3OTpcbiAgICBjYXNlIDEyODI6XG4gICAgICBzcmMgPSBTdG9ybTtcbiAgICAgIGJyZWFrO1xuICAgIGRlZmF1bHQ6XG4gICAgICBzcmMgPSBcIndlaXJkISBubyBvcHRpb24gaGVyZT9cIjtcbiAgICAgIGJyZWFrO1xuICB9XG4gIHJldHVybiBzcmM7XG59XG5cbmZ1bmN0aW9uIHN0YXJ0TG9hZCgpIHtcbiAgY29uc29sZS5sb2coXCJsb2FkaW5nLi4uXCIpO1xufVxuXG5mdW5jdGlvbiBzdG9wTG9hZCgpIHtcbiAgY29uc29sZS5sb2coXCJkb25lIVwiKTtcbn1cblxubGV0IHNsaWRlSW5kZXggPSAwO1xuXG5mdW5jdGlvbiBzaG93U2xpZGVzKGluZGV4KSB7XG4gIGNvbnN0IHNsaWRlcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlXCIpXTtcbiAgc2xpZGVzLmZvckVhY2goKHNsaWRlKSA9PiB7XG4gICAgc2xpZGUuc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwibm9uZVwiKTtcbiAgfSk7XG4gIHNsaWRlc1tpbmRleF0uc3R5bGUuc2V0UHJvcGVydHkoXCJkaXNwbGF5XCIsIFwiYmxvY2tcIik7XG59XG5cbnNob3dTbGlkZXMoMCk7XG5cbmZ1bmN0aW9uIHBsdXNTbGlkZXMoKSB7XG4gIHNsaWRlSW5kZXggKz0gMTtcbiAgaWYgKHNsaWRlSW5kZXggPj0gWy4uLmRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIuc2xpZGVcIildLmxlbmd0aCkge1xuICAgIHNsaWRlSW5kZXggPSAwO1xuICB9XG4gIHNob3dTbGlkZXMoc2xpZGVJbmRleCk7XG59XG5cbmZ1bmN0aW9uIG1pbnVzU2xpZGVzKCkge1xuICBzbGlkZUluZGV4IC09IDE7XG4gIGlmIChzbGlkZUluZGV4IDwgMCkge1xuICAgIHNsaWRlSW5kZXggPSBbLi4uZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5zbGlkZVwiKV0ubGVuZ3RoIC0gMTtcbiAgfVxuICBzaG93U2xpZGVzKHNsaWRlSW5kZXgpO1xufVxuXG5jb25zdCBwcmV2QnRuID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImJ1dHRvbi5wcmV2XCIpO1xuY29uc3QgbmV4dEJ0biA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJidXR0b24ubmV4dFwiKTtcblxucHJldkJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgbWludXNTbGlkZXMpO1xubmV4dEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgcGx1c1NsaWRlcyk7XG5cbmZ1bmN0aW9uIGV4dHJhY3REYXRhKGZvcmVjYXN0KSB7XG4gIHJldHVybiB7XG4gICAgbG9jYXRpb246IGAke2ZvcmVjYXN0LmxvY2F0aW9uLm5hbWV9LCAke2ZvcmVjYXN0LmxvY2F0aW9uLmNvdW50cnl9YCxcbiAgICB0aW1lOiBmb3JlY2FzdC5jdXJyZW50Lmxhc3RfdXBkYXRlZCxcbiAgICBpc0RheTogZm9yZWNhc3QuY3VycmVudC5pc19kYXksXG4gICAgdGVtcDogZm9yZWNhc3QuY3VycmVudC50ZW1wX2MsXG4gICAgY29uZGl0aW9uX2NvZGU6IGZvcmVjYXN0LmN1cnJlbnQuY29uZGl0aW9uLmNvZGUsXG4gICAgY29uZGl0aW9uX3RleHQ6IGZvcmVjYXN0LmN1cnJlbnQuY29uZGl0aW9uLnRleHQsXG4gICAgZmVlbHNfbGlrZTogZm9yZWNhc3QuY3VycmVudC5mZWVsc2xpa2VfYyxcbiAgICBodW1pZGl0eTogZm9yZWNhc3QuY3VycmVudC5odW1pZGl0eSxcbiAgICB1dl9pbmRleDogZm9yZWNhc3QuY3VycmVudC51dixcbiAgICB3aW5kX2twaDogZm9yZWNhc3QuY3VycmVudC53aW5kX2twaCxcbiAgICB3aW5kX2RpcjogZm9yZWNhc3QuY3VycmVudC53aW5kX2RpcixcbiAgICB3aW5kX2RlZzogZm9yZWNhc3QuY3VycmVudC53aW5kX2RlZ3JlZSxcbiAgICBwcmVjaXA6IGZvcmVjYXN0LmN1cnJlbnQucHJlY2lwX21tLFxuICAgIGNsb3VkOiBmb3JlY2FzdC5jdXJyZW50LmNsb3VkLFxuICAgIGZvcmVjYXN0ZGF5OiBmb3JlY2FzdC5mb3JlY2FzdC5mb3JlY2FzdGRheS5tYXAoKGl0ZW0pID0+ICh7XG4gICAgICBzdW5yaXNlOiBpdGVtLmFzdHJvLnN1bnJpc2UsXG4gICAgICBzdW5zZXQ6IGl0ZW0uYXN0cm8uc3Vuc2V0LFxuICAgICAgbW9vbl9waGFzZTogaXRlbS5hc3Ryby5tb29uX3BoYXNlLFxuICAgICAgZGF0ZTogaXRlbS5kYXRlLFxuICAgICAgaG91cjogW1xuICAgICAgICB7XG4gICAgICAgICAgdGltZTogXCIwMDowMFwiLFxuICAgICAgICAgIHRlbXA6IGl0ZW0uaG91clswXS50ZW1wX2MsXG4gICAgICAgICAgY29uZGl0aW9uX2NvZGU6IGl0ZW0uaG91clswXS5jb25kaXRpb24uY29kZSxcbiAgICAgICAgICBjb25kaXRpb25fdGV4dDogaXRlbS5ob3VyWzBdLmNvbmRpdGlvbi50ZXh0LFxuICAgICAgICAgIGlzRGF5OiBpdGVtLmhvdXJbMF0uaXNfZGF5LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGltZTogXCIwNjowMFwiLFxuICAgICAgICAgIHRlbXA6IGl0ZW0uaG91cls2XS50ZW1wX2MsXG4gICAgICAgICAgY29uZGl0aW9uX2NvZGU6IGl0ZW0uaG91cls2XS5jb25kaXRpb24uY29kZSxcbiAgICAgICAgICBjb25kaXRpb25fdGV4dDogaXRlbS5ob3VyWzZdLmNvbmRpdGlvbi50ZXh0LFxuICAgICAgICAgIGlzRGF5OiBpdGVtLmhvdXJbNl0uaXNfZGF5LFxuICAgICAgICB9LFxuICAgICAgICB7XG4gICAgICAgICAgdGltZTogXCIxMjowMFwiLFxuICAgICAgICAgIHRlbXA6IGl0ZW0uaG91clsxMl0udGVtcF9jLFxuICAgICAgICAgIGNvbmRpdGlvbl9jb2RlOiBpdGVtLmhvdXJbMTJdLmNvbmRpdGlvbi5jb2RlLFxuICAgICAgICAgIGNvbmRpdGlvbl90ZXh0OiBpdGVtLmhvdXJbMTJdLmNvbmRpdGlvbi50ZXh0LFxuICAgICAgICAgIGlzRGF5OiBpdGVtLmhvdXJbMTJdLmlzX2RheSxcbiAgICAgICAgfSxcbiAgICAgICAge1xuICAgICAgICAgIHRpbWU6IFwiMTg6MDBcIixcbiAgICAgICAgICB0ZW1wOiBpdGVtLmhvdXJbMThdLnRlbXBfYyxcbiAgICAgICAgICBjb25kaXRpb25fY29kZTogaXRlbS5ob3VyWzE4XS5jb25kaXRpb24uY29kZSxcbiAgICAgICAgICBjb25kaXRpb25fdGV4dDogaXRlbS5ob3VyWzE4XS5jb25kaXRpb24udGV4dCxcbiAgICAgICAgICBpc0RheTogaXRlbS5ob3VyWzE4XS5pc19kYXksXG4gICAgICAgIH0sXG4gICAgICBdLFxuICAgIH0pKSxcbiAgfTtcbn1cblxuZnVuY3Rpb24gcG9wdWxhdGVQYWdlKHByb21pc2UpIHtcbiAgcHJvbWlzZS50aGVuKChkYXRhKSA9PiB7XG4gICAgY29uc3QgY3VycmVudCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY3VycmVudFwiKTtcbiAgICBjb25zdCBjaXR5ID0gY3VycmVudC5xdWVyeVNlbGVjdG9yKFwiLmNpdHlcIik7XG4gICAgY2l0eS50ZXh0Q29udGVudCA9IGRhdGEubG9jYXRpb247XG4gICAgY29uc3QgdGltZSA9IGN1cnJlbnQucXVlcnlTZWxlY3RvcihcIi5jdXJyZW50LXRpbWVcIik7XG4gICAgdGltZS50ZXh0Q29udGVudCA9IGRhdGEudGltZTtcbiAgICBjb25zdCB3ZWF0aGVySWNvbiA9IGN1cnJlbnQucXVlcnlTZWxlY3RvcihcIi5jdXJyZW50LXdlYXRoZXIgPiAuaWNvblwiKTtcbiAgICBjb25zb2xlLmxvZyhkYXRhLmNvbmRpdGlvbl9jb2RlKTtcbiAgICB3ZWF0aGVySWNvbi5zcmMgPSBnZXRJY29uKGRhdGEuY29uZGl0aW9uX2NvZGUsIGRhdGEuaXNEYXkpO1xuICAgIGNvbnN0IHdlYXRoZXJDb25kaXRpb24gPSBjdXJyZW50LnF1ZXJ5U2VsZWN0b3IoXG4gICAgICBcIi5jdXJyZW50LXdlYXRoZXIgPiAuY29uZGl0aW9uXCIsXG4gICAgKTtcbiAgICB3ZWF0aGVyQ29uZGl0aW9uLnRleHRDb250ZW50ID0gZGF0YS5jb25kaXRpb25fdGV4dDtcbiAgICBjb25zdCB0ZW1wID0gY3VycmVudC5xdWVyeVNlbGVjdG9yKFwiLmN1cnJlbnQtd2VhdGhlciA+IC50ZW1wXCIpO1xuICAgIHRlbXAudGV4dENvbnRlbnQgPSBgJHtkYXRhLnRlbXB9wrpDYDtcblxuICAgIGNvbnN0IGZlZWxzTGlrZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZmVlbHMtbGlrZVwiKTtcbiAgICBmZWVsc0xpa2UudGV4dENvbnRlbnQgPSBgJHtkYXRhLmZlZWxzX2xpa2V9wrpDYDtcbiAgICBjb25zdCBodW1pZGl0eSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuaHVtaWRpdHlcIik7XG4gICAgaHVtaWRpdHkudGV4dENvbnRlbnQgPSBgJHtkYXRhLmh1bWlkaXR5fSVgO1xuICAgIGNvbnN0IHV2SW5kZXggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnV2LWluZGV4XCIpO1xuICAgIHV2SW5kZXgudGV4dENvbnRlbnQgPSBkYXRhLnV2X2luZGV4O1xuICAgIGNvbnN0IHdpbmQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLndpbmRcIik7XG4gICAgd2luZC50ZXh0Q29udGVudCA9IGAke2RhdGEud2luZF9rcGh9ICR7ZGF0YS53aW5kX2Rpcn1gO1xuICAgIGNvbnN0IHByZWNpcCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJlY2lwXCIpO1xuICAgIHByZWNpcC50ZXh0Q29udGVudCA9IGAke2RhdGEucHJlY2lwfW1tYDtcbiAgICBjb25zdCBjbG91ZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2xvdWRcIik7XG4gICAgY2xvdWQudGV4dENvbnRlbnQgPSBgJHtkYXRhLmNsb3VkfSVgO1xuXG4gICAgbGV0IGkgPSAwO1xuICAgIGNvbnN0IHNsaWRlcyA9IFsuLi5kb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKFwiLnNsaWRlXCIpXTtcbiAgICBzbGlkZXMuZm9yRWFjaCgoc2xpZGUpID0+IHtcbiAgICAgIGNvbnN0IHN1bnJpc2UgPSBzbGlkZS5xdWVyeVNlbGVjdG9yKFwiLnN1bnJpc2VcIik7XG4gICAgICBzdW5yaXNlLnRleHRDb250ZW50ID0gZGF0YS5mb3JlY2FzdGRheVtpXS5zdW5yaXNlO1xuICAgICAgY29uc3Qgc3Vuc2V0ID0gc2xpZGUucXVlcnlTZWxlY3RvcihcIi5zdW5zZXRcIik7XG4gICAgICBzdW5zZXQudGV4dENvbnRlbnQgPSBkYXRhLmZvcmVjYXN0ZGF5W2ldLnN1bnNldDtcbiAgICAgIGNvbnN0IG1vb25QaGFzZSA9IHNsaWRlLnF1ZXJ5U2VsZWN0b3IoXCIubW9vbi1waGFzZVwiKTtcbiAgICAgIG1vb25QaGFzZS50ZXh0Q29udGVudCA9IGRhdGEuZm9yZWNhc3RkYXlbaV0ubW9vbl9waGFzZTtcblxuICAgICAgbGV0IGogPSAwO1xuICAgICAgWy4uLnNsaWRlLnF1ZXJ5U2VsZWN0b3JBbGwoXCIuaG91clwiKV0uZm9yRWFjaCgoaG91cikgPT4ge1xuICAgICAgICBjb25zdCBpY29uID0gaG91ci5xdWVyeVNlbGVjdG9yKFwiLmljb25cIik7XG4gICAgICAgIGljb24uc3JjID0gZ2V0SWNvbihcbiAgICAgICAgICBkYXRhLmZvcmVjYXN0ZGF5W2ldLmhvdXJbal0uY29uZGl0aW9uX2NvZGUsXG4gICAgICAgICAgZGF0YS5mb3JlY2FzdGRheVtpXS5ob3VyW2pdLmlzRGF5LFxuICAgICAgICApO1xuICAgICAgICBjb25zdCBjb25kaXRpb24gPSBob3VyLnF1ZXJ5U2VsZWN0b3IoXCIuY29uZGl0aW9uXCIpO1xuICAgICAgICBjb25kaXRpb24udGV4dENvbnRlbnQgPSBkYXRhLmZvcmVjYXN0ZGF5W2ldLmhvdXJbal0uY29uZGl0aW9uX3RleHQ7XG4gICAgICAgIGNvbnN0IHRlbXBlcmF0dXJlID0gaG91ci5xdWVyeVNlbGVjdG9yKFwiLnRlbXBcIik7XG4gICAgICAgIHRlbXBlcmF0dXJlLnRleHRDb250ZW50ID0gYCR7ZGF0YS5mb3JlY2FzdGRheVtpXS5ob3VyW2pdLnRlbXB9wrpDYDtcbiAgICAgICAgaiArPSAxO1xuICAgICAgfSk7XG4gICAgICBpICs9IDE7XG4gICAgfSk7XG4gICAgc2xpZGVJbmRleCA9IDA7XG4gICAgc2hvd1NsaWRlcyhzbGlkZUluZGV4KTtcbiAgfSk7XG59XG5cbmFzeW5jIGZ1bmN0aW9uIGdldEZvcmVjYXN0RGF0YShsb2NhdGlvbikge1xuICBzdGFydExvYWQoKTtcbiAgY29uc3QgZm9yZWNhc3RSZXF1ZXN0ID0gYXdhaXQgZmV0Y2goXG4gICAgYGh0dHBzOi8vYXBpLndlYXRoZXJhcGkuY29tL3YxL2ZvcmVjYXN0Lmpzb24/a2V5PWZmNDYzOGY1ODNlZjRhYTY5OGMxMTQ5MTkyMzExMDkmcT0ke2xvY2F0aW9ufSZkYXlzPTNgLFxuICAgIHsgbW9kZTogXCJjb3JzXCIgfSxcbiAgKTtcbiAgY29uc3QgZm9yZWNhc3QgPSBhd2FpdCBmb3JlY2FzdFJlcXVlc3QuanNvbigpO1xuICBjb25zb2xlLmxvZyhmb3JlY2FzdCk7XG4gIGNvbnN0IGRhdGEgPSBleHRyYWN0RGF0YShmb3JlY2FzdCk7XG4gIGNvbnNvbGUubG9nKGRhdGEpO1xuICBzdG9wTG9hZCgpO1xuICByZXR1cm4gZGF0YTtcbn1cblxucG9wdWxhdGVQYWdlKGdldEZvcmVjYXN0RGF0YShcIlBhcmlzXCIpKTtcblxuYXN5bmMgZnVuY3Rpb24gc2VhcmNoQ2l0aWVzKHN0cikge1xuICBpZiAoc3RyLnRyaW0oKS5sZW5ndGggPiAwKSB7XG4gICAgY29uc3Qgb3B0aW9uc1JlcXVlc3QgPSBhd2FpdCBmZXRjaChcbiAgICAgIGBodHRwczovL2FwaS53ZWF0aGVyYXBpLmNvbS92MS9zZWFyY2guanNvbj9rZXk9ZmY0NjM4ZjU4M2VmNGFhNjk4YzExNDkxOTIzMTEwOSZxPSR7c3RyfWAsXG4gICAgICB7IG1vZGU6IFwiY29yc1wiIH0sXG4gICAgKTtcbiAgICBpZiAob3B0aW9uc1JlcXVlc3Qub2spIHtcbiAgICAgIGNvbnN0IG9wdGlvbnMgPSBhd2FpdCBvcHRpb25zUmVxdWVzdC5qc29uKCk7XG4gICAgICByZXR1cm4gb3B0aW9ucztcbiAgICB9XG4gIH1cbiAgcmV0dXJuIFtdO1xufVxuXG5jb25zdCBzZWFyY2ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiaW5wdXRcIik7XG5jb25zdCBzZWFyY2hCdG4gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiYnV0dG9uXCIpO1xuXG5jb25zdCBmb3JtID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcImZvcm1cIik7XG5cbmZvcm0uYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCAoZXYpID0+IHtcbiAgZXYucHJldmVudERlZmF1bHQoKTtcbn0pO1xuXG5zZWFyY2guYWRkRXZlbnRMaXN0ZW5lcihcInNlYXJjaFwiLCAoZXYpID0+IHtcbiAgZXYucHJldmVudERlZmF1bHQoKTtcbn0pO1xuXG5mdW5jdGlvbiBzZWFyY2hTdHIoZSkge1xuICBjb25zdCBpbmRleCA9IGUudGFyZ2V0LmdldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIik7XG4gIHNlYXJjaENpdGllcyhzZWFyY2gudmFsdWUpLnRoZW4oKGNpdGllcykgPT4ge1xuICAgIHBvcHVsYXRlUGFnZShnZXRGb3JlY2FzdERhdGEoYCR7Y2l0aWVzW2luZGV4XS5sYXR9LCR7Y2l0aWVzW2luZGV4XS5sb259YCkpO1xuICAgIGZvcm0ucmVzZXQoKTtcbiAgfSk7XG59XG5cbnNlYXJjaEJ0bi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICBzZWFyY2hDaXRpZXMoc2VhcmNoLnZhbHVlKS50aGVuKChjaXRpZXMpID0+IHtcbiAgICBpZiAoY2l0aWVzLmxlbmd0aCA+IDApIHtcbiAgICAgIGNvbnN0IGNob2ljZSA9IGNpdGllc1swXTtcbiAgICAgIHBvcHVsYXRlUGFnZShnZXRGb3JlY2FzdERhdGEoYCR7Y2hvaWNlLmxhdH0sJHtjaG9pY2UubG9ufWApKTtcbiAgICAgIGNvbnNvbGUubG9nKGNob2ljZSk7XG4gICAgfSBlbHNlIHtcbiAgICAgIGNvbnNvbGUubG9nKFwibm8gb3B0aW9ucyFcIik7XG4gICAgfVxuICB9KTtcbiAgZm9ybS5yZXNldCgpO1xufSk7XG5cbnNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICBjb25zdCBzZWFyY2hCb3ggPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiZGl2LnNlYXJjaC1ib3hcIik7XG4gIHNlYXJjaEJveC50ZXh0Q29udGVudCA9IFwiXCI7XG4gIHNlYXJjaENpdGllcyhzZWFyY2gudmFsdWUpLnRoZW4oKGNpdGllcykgPT4ge1xuICAgIGxldCBpbmRleCA9IDA7XG4gICAgY2l0aWVzLmZvckVhY2goKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNpdHkgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgICAgY2l0eS5jbGFzc0xpc3QuYWRkKFwiY2l0eS1vcHRpb25cIik7XG4gICAgICBjaXR5LnNldEF0dHJpYnV0ZShcImRhdGEtaW5kZXhcIiwgaW5kZXgpO1xuICAgICAgY2l0eS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgc2VhcmNoU3RyKTtcbiAgICAgIGNpdHkudGV4dENvbnRlbnQgPSBpdGVtLnJlZ2lvblxuICAgICAgICA/IGAke2l0ZW0ubmFtZX0sICR7aXRlbS5yZWdpb259LCAke2l0ZW0uY291bnRyeX1gXG4gICAgICAgIDogYCR7aXRlbS5uYW1lfSwgJHtpdGVtLmNvdW50cnl9YDtcbiAgICAgIHNlYXJjaEJveC5hcHBlbmRDaGlsZChjaXR5KTtcbiAgICAgIGluZGV4ICs9IDE7XG4gICAgfSk7XG4gIH0pO1xufSk7XG5cbnNlYXJjaC5hZGRFdmVudExpc3RlbmVyKFwiZm9jdXNcIiwgKCkgPT4ge1xuICBjb25zdCBzZWFyY2hCb3ggPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICBzZWFyY2hCb3guY2xhc3NMaXN0LmFkZChcInNlYXJjaC1ib3hcIik7XG4gIHNlYXJjaC5wYXJlbnRFbGVtZW50LmFwcGVuZENoaWxkKHNlYXJjaEJveCk7XG59KTtcblxuc2VhcmNoLmFkZEV2ZW50TGlzdGVuZXIoXCJmb2N1c291dFwiLCAoKSA9PiB7XG4gIGNvbnN0IHNlYXJjaEJveCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCJkaXYuc2VhcmNoLWJveFwiKTtcbiAgc2V0VGltZW91dCgoKSA9PiB7XG4gICAgc2VhcmNoQm94LnJlbW92ZSgpO1xuICB9LCAzMDApO1xufSk7XG4iXSwibmFtZXMiOltdLCJzb3VyY2VSb290IjoiIn0=